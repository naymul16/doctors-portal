if (self.CavalryLogger) { CavalryLogger.start_js(["qR\/XF"]); }

__d("useCometProductTagCreatorCatalogTypeaheadDataSourceQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"query"},{defaultValue:null,kind:"LocalArgument",name:"query_limit"}],b=[{alias:null,args:[{kind:"Variable",name:"query",variableName:"query"},{kind:"Variable",name:"query_limit",variableName:"query_limit"}],concreteType:"ProductTagSharedCatalogTypeaheadResult",kind:"LinkedField",name:"product_tag_shared_catalog_typeahead",plural:!0,selections:[{alias:null,args:null,concreteType:"ProductTaggingCatalogDetails",kind:"LinkedField",name:"shared_product_catalog",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"catalog_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"products_count",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"seller_page_profile_uri",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"seller_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"catalog_type",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"useCometProductTagCreatorCatalogTypeaheadDataSourceQuery",selections:b,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"useCometProductTagCreatorCatalogTypeaheadDataSourceQuery",selections:b},params:{id:"4762103880497140",metadata:{},name:"useCometProductTagCreatorCatalogTypeaheadDataSourceQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("useCometProductTagTypeaheadDataSourceQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"catalog_id"},b={defaultValue:null,kind:"LocalArgument",name:"count"},c={defaultValue:null,kind:"LocalArgument",name:"query"},d={defaultValue:null,kind:"LocalArgument",name:"result_types"},e=[{alias:null,args:null,kind:"ScalarField",name:"formatted_amount",storageKey:null}];e=[{alias:null,args:[{kind:"Variable",name:"catalog_id",variableName:"catalog_id"},{kind:"Literal",name:"category",value:""},{kind:"Variable",name:"count",variableName:"count"},{kind:"Variable",name:"query",variableName:"query"},{kind:"Literal",name:"refetch_counter",value:0},{kind:"Variable",name:"result_types",variableName:"result_types"}],concreteType:"ProductTagTypeaheadResultEntry",kind:"LinkedField",name:"product_tag_typeahead",plural:!0,selections:[{alias:null,args:null,concreteType:"ProductItem",kind:"LinkedField",name:"product_item",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:[{kind:"Literal",name:"height",value:60},{kind:"Literal",name:"width",value:60}],concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:"profile_picture(height:60,width:60)"},{alias:null,args:null,kind:"ScalarField",name:"is_on_sale",storageKey:null},{alias:null,args:null,concreteType:"CurrencyAmount",kind:"LinkedField",name:"strikethrough_price",plural:!1,selections:e,storageKey:null},{alias:null,args:null,concreteType:"CurrencyAmount",kind:"LinkedField",name:"listing_price",plural:!1,selections:e,storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[a,b,c,d],kind:"Fragment",metadata:null,name:"useCometProductTagTypeaheadDataSourceQuery",selections:e,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[c,a,b,d],kind:"Operation",name:"useCometProductTagTypeaheadDataSourceQuery",selections:e},params:{id:"4101916296549445",metadata:{},name:"useCometProductTagTypeaheadDataSourceQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("CometPhotoEditorAddProductTagQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"id"}],b=[{kind:"Variable",name:"id",variableName:"id"}],c={alias:null,args:null,kind:"ScalarField",name:"has_shared_catalog_segments",storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"CometPhotoEditorAddProductTagQuery",selections:[{alias:null,args:b,concreteType:"Page",kind:"LinkedField",name:"page",plural:!1,selections:[c],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"CometPhotoEditorAddProductTagQuery",selections:[{alias:null,args:b,concreteType:"Page",kind:"LinkedField",name:"page",plural:!1,selections:[c,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:"2666762486759779",metadata:{},name:"CometPhotoEditorAddProductTagQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("CometSearchTypeaheadProductTagCommonStyles",["stylex"],(function(a,b,c,d,e,f){"use strict";a={container:{backgroundColor:"hybvsw6c",borderTop:"opwvks06",borderEnd:"hop1g133",borderBottom:"linmgsc8",borderStart:"t63ysoy8",borderTopStartRadius:"ue3kfks5",borderTopEndRadius:"pw54ja7n",borderBottomEndRadius:"uo3d90p7",borderBottomStartRadius:"l82x9zwi",height:"hww415yy",width:"oh7imozk"},scrollView:{marginEnd:"tmqn73lw"},searchHeader:{marginEnd:"oi9244e8",marginStart:"h676nmdw",paddingBottom:"sj5x9vvc"},typeahead:{justifyContent:"i1fnvgqd",overflowX:"ni8dbmo4",overflowY:"stjgntxs",paddingEnd:"hv4rvrfc",paddingStart:"dati1w0a",paddingTop:"pybr56ya",width:"k4urcfbm"},typeaheadHeader:{alignItems:"bp9cbjyn",borderBottom:"linmgsc8",boxSizing:"rq0escxv",display:"j83agx80",height:"cb02d2ww",justifyContent:"taijpn5t"},typeaheadItemImage:{borderTop:"opwvks06",borderEnd:"hop1g133",borderBottom:"linmgsc8",borderStart:"t63ysoy8",borderTopStartRadius:"ue3kfks5",borderTopEndRadius:"pw54ja7n",borderBottomEndRadius:"uo3d90p7",borderBottomStartRadius:"l82x9zwi"}};b=a.container;f.container=b;c=a.scrollView;f.scrollView=c;d=a.searchHeader;f.searchHeader=d;e=a.typeahead;f.typeahead=e;b=a.typeaheadHeader;f.typeaheadHeader=b;c=a.typeaheadItemImage;f.typeaheadItemImage=c}),null);
__d("CometSearchTypeaheadProductTagSharedCatalogViewItem.react",["fbt","React","TetraText.react","TetraTextPairing.react"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h=b("React");function a(a){a=a.entryItem;var c=a.getLabel();a=h.jsx("div",{children:h.jsxs(b("TetraText.react"),{color:"secondary",type:"body4",children:[a.getRawData().sellerName,h.jsx("br",{}),a.getRawData().productsCount,g._({"*":" products","_1":" product"},[g._plural(a.getRawData().productsCount)])]})});return h.jsx(b("TetraTextPairing.react"),{body:a,bodyColor:"secondary",headline:c,headlineLineLimit:2,level:4,reduceEmphasis:!0})}}),null);
__d("CometSearchTypeaheadProductTagSharedCatalogViewStrategy.react",["CometImage.react","CometScrollView.react","CometSearchTypeaheadBaseViewItem.react","CometSearchTypeaheadBaseViewList.react","CometSearchTypeaheadProductTagCommonStyles","CometSearchTypeaheadProductTagSharedCatalogViewItem.react","React","stylex"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=b("React"),i={sellerProfilePicPlaceHolder:{backgroundClip:"sgqq4ow5",backgroundColor:"v0lkmu4y",borderTop:"opwvks06",borderEnd:"hop1g133",borderBottom:"linmgsc8",borderStart:"t63ysoy8",borderTopStartRadius:"s45kfl79",borderTopEndRadius:"emlxlaya",borderBottomEndRadius:"bkmhp75w",borderBottomStartRadius:"spb7xbtv",height:"ve1iu6zt",width:"afavc1dv"},typeaheadList:{marginEnd:"wkznzc2l",marginTop:"aov4n071",maxHeight:"kvtk5utb",minHeight:"tgvbjcpo"}};function a(a){var c=a.entries;a.extraViewProps;var d=a.highlightedEntry;a.onAbandonTypeahead_DO_NOT_USE;a.queryString;var e=babelHelpers.objectWithoutPropertiesLoose(a,["entries","extraViewProps","highlightedEntry","onAbandonTypeahead_DO_NOT_USE","queryString"]);return h.jsx("div",{children:h.jsx(b("CometScrollView.react"),{xstyle:b("CometSearchTypeaheadProductTagCommonStyles").scrollView,children:h.jsx("div",{className:(g||(g=b("stylex")))(i.typeaheadList),children:h.jsx(b("CometSearchTypeaheadBaseViewList.react"),{entries:c,highlightedEntry:d,children:function(a,c){return h.createElement(b("CometSearchTypeaheadBaseViewItem.react"),babelHelpers["extends"]({},e,{entry:a,isActive:c,itemStartContent:a.getRawData().sellerPhotoURI===""?h.jsx("div",{className:(g||(g=b("stylex")))(i.sellerProfilePicPlaceHolder)}):h.jsx(b("CometImage.react"),{height:70,src:a.getRawData().sellerPhotoURI,width:70,xstyle:i.sellerProfilePicPlaceHolder}),key:a.getKey(),role:"none"}),h.jsx(b("CometSearchTypeaheadProductTagSharedCatalogViewItem.react"),{entryItem:a}))}})})})})}}),null);
__d("ProductTagCatalogTypeaheadConsecutiveBackspaceFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1759336");c=b("FalcoLoggerInternal").create("product_tag_catalog_typeahead_consecutive_backspace",a);e.exports=c}),null);
__d("ProductTagCatalogTypeaheadEscapeFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1762240");c=b("FalcoLoggerInternal").create("product_tag_catalog_typeahead_escape",a);e.exports=c}),null);
__d("useCometProductTagCreatorCatalogTypeaheadDataSource",["CometRelay","CometTypeaheadDataEntry","useCometTypeaheadGraphQLDataSource","useCometProductTagCreatorCatalogTypeaheadDataSourceQuery.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=g!==void 0?g:g=b("useCometProductTagCreatorCatalogTypeaheadDataSourceQuery.graphql");function i(a){a=a==null?void 0:a.product_tag_shared_catalog_typeahead;return a==null?[]:a.map(function(a){var c;return(a==null?void 0:(c=a.shared_product_catalog)==null?void 0:c.catalog_id)==null||(a==null?void 0:(c=a.shared_product_catalog)==null?void 0:c.name)==null||(a==null?void 0:(c=a.shared_product_catalog)==null?void 0:c.products_count)==null||(a==null?void 0:(c=a.shared_product_catalog)==null?void 0:c.seller_name)==null||(a==null?void 0:(c=a.shared_product_catalog)==null?void 0:c.catalog_type)==null?null:new(b("CometTypeaheadDataEntry"))({key:a.shared_product_catalog.catalog_id,label:a.shared_product_catalog.name,rawData:{catalogType:a.shared_product_catalog.catalog_type,productsCount:a.shared_product_catalog.products_count,sellerName:a.shared_product_catalog.seller_name,sellerPhotoURI:a.shared_product_catalog.seller_page_profile_uri||""}})}).filter(Boolean)}function a(a){var c=a.limit;return b("useCometTypeaheadGraphQLDataSource")({gqlQuery:h,limit:c,normalize:i,queryVariablesBuilderFunction:function(a){a=a.query;return{query:a,query_limit:c}}})}}),null);
__d("CometProductTagCatalogTypeahead.react",["fbt","Actor","CometSearchTypeaheadBaseInputRoundedStrategy.react","CometSearchTypeaheadBaseLayoutInlineStrategy.react","CometSearchTypeaheadProductTagCommonStyles","CometSearchTypeaheadProductTagSharedCatalogViewStrategy.react","CometTypeahead.react","ProductTagCatalogTypeaheadConsecutiveBackspaceFalcoEvent","ProductTagCatalogTypeaheadEscapeFalcoEvent","React","TetraText.react","stylex","useCometProductTagCreatorCatalogTypeaheadDataSource"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h,i=b("React"),j=100;function a(a){var c=b("useCometProductTagCreatorCatalogTypeaheadDataSource")({limit:j}),d=i.useState(""),e=d[0],f=d[1];d=i.useState(!0);var k=d[0],l=d[1];d=i.useState("");var m=d[0],n=d[1];d=b("Actor").useActor();var o=d[0];d={layoutXStyle:b("CometSearchTypeaheadProductTagCommonStyles").typeahead};function p(b){return{creator_id:o,input:{typeaheadQuery:b},media_id:a.media_id,media_type:"photo",platform:"comet",product_type:"SHARED_PRODUCT_ITEM",referral_source:a.referral_source}}var q=function(){e!==""&&k&&(b("ProductTagCatalogTypeaheadConsecutiveBackspaceFalcoEvent").log(function(){return p(e)}),l(!1))},r=function(a){m.length<a.length&&l(!0);n(a);f((a=a)!=null?a:"")},s=function(){e!==""&&b("ProductTagCatalogTypeaheadEscapeFalcoEvent").log(function(){return p(e)})};return i.jsxs("div",{className:(h||(h=b("stylex")))(b("CometSearchTypeaheadProductTagCommonStyles").container),children:[i.jsx("div",{className:h(b("CometSearchTypeaheadProductTagCommonStyles").typeaheadHeader),children:i.jsx(b("TetraText.react"),{isSemanticHeading:!0,numberOfLines:1,type:"headlineEmphasized3",children:g._("Select a Catalog")})}),i.jsx(b("CometTypeahead.react"),{autoFocus:!0,dataSource:c,inputStrategyRenderer:b("CometSearchTypeaheadBaseInputRoundedStrategy.react"),layoutStrategyRenderer:b("CometSearchTypeaheadBaseLayoutInlineStrategy.react"),onBackspace:q,onChange:r,onEscape:s,onPressEntry:a.onPressEntry,placeholder:a.placeholder,queryString:e,viewStrategyRenderer:b("CometSearchTypeaheadProductTagSharedCatalogViewStrategy.react"),xstyles:d})]})}}),null);
__d("CometSearchTypeaheadProductTagViewItem.react",["fbt","CometImage.react","CometSearchTypeaheadBaseViewItem.react","CometSearchTypeaheadProductTagCommonStyles","React","TetraText.react","TetraTextPairing.react","stylex"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h=b("React");function a(a){var c=a.entry,d=a.extraViewItemProps;d=d===void 0?{}:d;d=d.isProductItemFromSharedCatalog;a.queryString;a=babelHelpers.objectWithoutPropertiesLoose(a,["entry","extraViewItemProps","queryString"]);var e=c.getProductName();d=d&&g._("ID: {product ID}",[g._param("product ID",c.getKey())]);var f=c.getIsProductOnSale()?h.jsxs(h.Fragment,{children:[h.jsx(b("TetraText.react"),{type:"body4",children:c.getProductCurrentPrice()})," ",h.jsx("span",{className:"l89fnc2e kkf49tns m9osqain",children:h.jsx(b("TetraText.react"),{color:"secondary",type:"body4",children:c.getProductOriginalPrice()})})]}):h.jsx(b("TetraText.react"),{type:"body4",children:c.getProductCurrentPrice()});return h.createElement(b("CometSearchTypeaheadBaseViewItem.react"),babelHelpers["extends"]({},a,{entry:c,itemStartContent:h.jsx(b("CometImage.react"),{height:70,src:c.getPhotoURI(),width:70,xstyle:b("CometSearchTypeaheadProductTagCommonStyles").typeaheadItemImage}),key:c.getKey()}),h.jsx(b("TetraTextPairing.react"),{body:f,headline:e,headlineLineLimit:2,level:4,meta:d,reduceEmphasis:!0}))}}),null);
__d("CometPhotoViewerProductContext",["React"],(function(a,b,c,d,e,f){"use strict";a=b("React");c=a.createContext();e.exports=c}),null);
__d("CometSearchTypeaheadAddProductItem.react",["ix","fbt","CometImage.react","CometPhotoViewerProductContext","CometPressable.react","React","TetraTextPairing.react","XProductsControllerRouteBuilder","asset","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";e.exports=a;var i,j=b("React"),k={clickableItem:{borderTopStartRadius:"ue3kfks5",borderTopEndRadius:"pw54ja7n",borderBottomEndRadius:"uo3d90p7",borderBottomStartRadius:"l82x9zwi",width:"k4urcfbm"},container:{display:"j83agx80",marginBottom:"oud54xpy",marginTop:"ku2m03ct",paddingEnd:"hv4rvrfc",paddingStart:"scb9dxdr"},icon:{borderTop:"aiyoozdw",borderEnd:"ge9gsnyf",borderBottom:"bo6hxkk5",borderStart:"l65kqznh",borderTopStartRadius:"ue3kfks5",borderTopEndRadius:"pw54ja7n",borderBottomEndRadius:"uo3d90p7",borderBottomStartRadius:"l82x9zwi",paddingTop:"bjjx79mm",paddingEnd:"gpl4oick",paddingBottom:"jbae33se",paddingStart:"gm7ombtx"},text:{alignItems:"bp9cbjyn",display:"j83agx80",marginEnd:"m8hsej2k",marginStart:"gu00c43d",paddingTop:"ecm0bbzt",paddingBottom:"e5nlhep0"}};function a(){var a,c=j.jsx(b("CometImage.react"),{src:g("1396833")});a=(a=j.useContext(b("CometPhotoViewerProductContext")))==null?void 0:a.catalogID;a!=null&&a!==""?a=b("XProductsControllerRouteBuilder").buildExtraURL("/products/catalogs/{catalog_id}/products/",{catalog_id:a}):a=b("XProductsControllerRouteBuilder").buildURL({});return j.jsx(b("CometPressable.react"),{linkProps:{target:"_blank",url:a},xstyle:k.clickableItem,children:j.jsxs("div",{className:(i||(i=b("stylex")))(k.container),children:[j.jsx("div",{className:i(k.icon),children:c}),j.jsx("div",{className:i(k.text),children:j.jsx(b("TetraTextPairing.react"),{body:h._("Add new product to your shop catalog"),headline:"Add Product",level:4})})]})})}}),null);
__d("CometSearchTypeaheadProductTagViewStrategy.react",["fbt","CometScrollView.react","CometSearchTypeaheadAddProductItem.react","CometSearchTypeaheadBaseViewList.react","CometSearchTypeaheadProductTagCommonStyles","React","TetraUnitHeader.react","gkx","stylex"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h,i=b("React"),j={typeaheadList:{marginEnd:"wkznzc2l",maxHeight:"recjqbrf",minHeight:"tgvbjcpo",paddingBottom:"sj5x9vvc"},typeaheadListGK:{marginEnd:"wkznzc2l",maxHeight:"ed7v512z",minHeight:"tgvbjcpo",paddingBottom:"sj5x9vvc"}};function a(a){var c=a.entries,d=a.extraViewProps;d=d===void 0?{}:d;var e=d.isProductItemFromSharedCatalog;d=a.highlightedEntry;a.onAbandonTypeahead_DO_NOT_USE;var f=a.queryString,k=a.viewItemStrategyRenderer,l=babelHelpers.objectWithoutPropertiesLoose(a,["entries","extraViewProps","highlightedEntry","onAbandonTypeahead_DO_NOT_USE","queryString","viewItemStrategyRenderer"]);a=f===""&&c.length>0;var m=b("gkx")("1648353")?j.typeaheadListGK:j.typeaheadList;return i.jsxs("div",{children:[a?i.jsx("div",{className:(h||(h=b("stylex")))(b("CometSearchTypeaheadProductTagCommonStyles").searchHeader),children:i.jsx(b("TetraUnitHeader.react"),{headline:g._("Recently added products"),level:3,paddingHorizontal:0})}):i.jsx("div",{className:(h||(h=b("stylex")))(b("CometSearchTypeaheadProductTagCommonStyles").searchHeader),children:i.jsx(b("TetraUnitHeader.react"),{headline:g._("Results ({number of products that matches in product tag typeahead})",[g._param("number of products that matches in product tag typeahead",c.length)]),level:3,paddingHorizontal:0})}),i.jsx("div",{className:(h||(h=b("stylex")))(b("CometSearchTypeaheadProductTagCommonStyles").scrollView),children:i.jsx(b("CometScrollView.react"),{children:i.jsxs("div",{className:h(m),children:[i.jsx(b("CometSearchTypeaheadBaseViewList.react"),{entries:c,highlightedEntry:d,children:function(a,b){return i.createElement(k,babelHelpers["extends"]({},l,{entry:a,extraViewItemProps:{isProductItemFromSharedCatalog:e},isActive:b,key:a.getKey(),queryString:f,role:"none"}))}}),!e&&i.jsx(b("CometSearchTypeaheadAddProductItem.react"),{})]})})})]})}}),null);
__d("ProductTagTypeaheadConsecutiveBackspaceFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1744230");c=b("FalcoLoggerInternal").create("product_tag_typeahead_consecutive_backspace",a);e.exports=c}),null);
__d("ProductTagTypeaheadEscapeFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1744231");c=b("FalcoLoggerInternal").create("product_tag_typeahead_escape",a);e.exports=c}),null);
__d("CometProductTagTypeaheadEntry",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a}var b=a.prototype;b.getKey=function(){return this.$1.productId};b.getLabel=function(){return this.getProductName()};b.getRawData=function(){return this.$1};b.getProductName=function(){return this.$1.productName};b.getPhotoURI=function(){return this.$1.photoURI};b.getIsProductOnSale=function(){return this.$1.isProductOnSale};b.getProductCurrentPrice=function(){return this.$1.productCurrentPrice};b.getProductOriginalPrice=function(){return this.$1.productOriginalPrice};return a}();e.exports=a}),null);
__d("useCometProductTagTypeaheadDataSource",["CometProductTagTypeaheadEntry","CometRelay","useCometTypeaheadGraphQLDataSource","useCometProductTagTypeaheadDataSourceQuery.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=g!==void 0?g:g=b("useCometProductTagTypeaheadDataSourceQuery.graphql");function i(a){a=a==null?void 0:a.product_tag_typeahead;return a==null?[]:a.map(function(a){var c;return(a==null?void 0:a.product_item)==null||(a==null?void 0:(c=a.product_item)==null?void 0:c.id)==null?null:new(b("CometProductTagTypeaheadEntry"))({isProductOnSale:a.product_item.is_on_sale||!1,photoURI:((c=a.product_item)==null?void 0:(c=c.profile_picture)==null?void 0:c.uri)||"",productCurrentPrice:((c=a.product_item)==null?void 0:(c=c.listing_price)==null?void 0:c.formatted_amount)||"",productId:a.product_item.id,productName:a.product_item.name||"",productOriginalPrice:((c=a.product_item)==null?void 0:(a=c.strikethrough_price)==null?void 0:a.formatted_amount)||""})}).filter(Boolean)}function a(a){var c=a.catalogID,d=a.limit,e=a.resultTypes;return b("useCometTypeaheadGraphQLDataSource")({gqlQuery:h,limit:d,normalize:i,queryVariablesBuilderFunction:function(a){a=a.query;return{catalog_id:c,count:d,query:a,result_types:e}}})}}),null);
__d("CometProductTagTypeahead.react",["ix","fbt","Actor","CometSearchTypeaheadBaseInputRoundedStrategy.react","CometSearchTypeaheadBaseLayoutInlineStrategy.react","CometSearchTypeaheadProductTagCommonStyles","CometSearchTypeaheadProductTagViewItem.react","CometSearchTypeaheadProductTagViewStrategy.react","CometTypeahead.react","ProductTagTypeaheadConsecutiveBackspaceFalcoEvent","ProductTagTypeaheadEscapeFalcoEvent","React","TetraCircleButton.react","TetraText.react","fbicon","gkx","stylex","useCometProductTagTypeaheadDataSource","useCometSearchTypeaheadBaseListViewStrategy"],(function(a,b,c,d,e,f,g,h){"use strict";e.exports=a;var i,j=b("React"),k={backButton:{position:"pmk7jnqg",start:"re5koujm",top:"fcg2cn6m"}},l=10;function a(a){var c,d,e;c=(c=a.sharedCatalog)==null?void 0:c.getKey();d=(d=a.sharedCatalog)==null?void 0:d.getRawData().sellerName;e=(e=a.sharedCatalog)==null?void 0:e.getRawData().catalogType;var f=e==="SHARED"&&b("gkx")("1648353")?{catalogID:c,limit:l,resultTypes:["SHARED_PRODUCT_ITEM"]}:{catalogID:null,limit:l,resultTypes:["SHOP_PRODUCT_ITEM"]},m=b("useCometProductTagTypeaheadDataSource")(f),n=j.useState(""),o=n[0],p=n[1];n=j.useState(!0);var q=n[0],r=n[1];n=j.useState("");var s=n[0],t=n[1];n=b("Actor").useActor();var u=n[0];n={layoutXStyle:b("CometSearchTypeaheadProductTagCommonStyles").typeahead};function v(b){return{creator_id:u,input:{typeaheadQuery:b},media_id:a.media_id,media_type:"photo",platform:"comet",product_type:f.resultTypes[0],referral_source:a.referral_source}}var w=function(){o!==""&&q&&(b("ProductTagTypeaheadConsecutiveBackspaceFalcoEvent").log(function(){return v(o)}),r(!1))},x=function(a){s.length<a.length&&r(!0);t(a);p((a=a)!=null?a:"")},y=function(){o!==""&&b("ProductTagTypeaheadEscapeFalcoEvent").log(function(){return v(o)})};e=b("useCometSearchTypeaheadBaseListViewStrategy")({extraViewProps:{isProductItemFromSharedCatalog:e==="SHARED"},viewItemStrategyRenderer:b("CometSearchTypeaheadProductTagViewItem.react"),viewListStrategyRenderer:b("CometSearchTypeaheadProductTagViewStrategy.react")});return j.jsxs("div",{className:(i||(i=b("stylex")))(b("CometSearchTypeaheadProductTagCommonStyles").container),children:[b("gkx")("1648353")&&j.jsxs("div",{children:[c!=null&&j.jsx("div",{className:(i||(i=b("stylex")))(k.backButton),children:j.jsx(b("TetraCircleButton.react"),{color:"secondary",icon:b("fbicon")._(g("492488"),20),label:h._("Back"),onPress:a.onBack,size:36})}),j.jsx("div",{className:(i||(i=b("stylex")))(b("CometSearchTypeaheadProductTagCommonStyles").typeaheadHeader),children:j.jsx(b("TetraText.react"),{isSemanticHeading:!0,numberOfLines:1,type:"headlineEmphasized3",children:a.sharedCatalog!==null?h._("Select a Product from {catalog name} Catalog",[h._param("catalog name",d)]):h._("Select a Product")})})]}),j.jsx(b("CometTypeahead.react"),{autoFocus:!0,dataSource:m,inputStrategyRenderer:b("CometSearchTypeaheadBaseInputRoundedStrategy.react"),layoutStrategyRenderer:b("CometSearchTypeaheadBaseLayoutInlineStrategy.react"),onBackspace:w,onChange:x,onEscape:y,onPressEntry:a.onPressEntry,placeholder:a.placeholder,queryString:o,viewStrategyRenderer:e,xstyles:n})]})}}),null);
__d("CometProductTaggingConstants",[],(function(a,b,c,d,e,f){"use strict";a=7;f.DOT_HINT_BORDER_SIZE=a;b=16;f.DOT_HINT_DOT_SIZE=b;c=8;f.DOT_HINT_PADDING=c;d=46;f.TOTAL_DOT_SIZE=d}),null);
__d("ProductTagCatalogTypeaheadSelectCatalogFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1753681");c=b("FalcoLoggerInternal").create("product_tag_catalog_typeahead_select_catalog",a);e.exports=c}),null);
__d("ProductTagTypeaheadSelectProductFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1744232");c=b("FalcoLoggerInternal").create("product_tag_typeahead_select_product",a);e.exports=c}),null);
__d("CometPhotoEditorAddProductTag.react",["fbt","CometContextualLayer.react","CometPhotoViewerProductContext","CometPressable.react","CometProductTagCatalogTypeahead.react","CometProductTagDotHint.react","CometProductTaggingConstants","CometProductTagTypeahead.react","CometRelay","CometSearchTypeaheadBaseViewStrategyEventListener.react","FBLogger","PagesCometComposerContext","React","gkx","stylex","CometPhotoEditorAddProductTagQuery.graphql","ProductTagTypeaheadSelectProductFalcoEvent","ProductTagCatalogTypeaheadSelectCatalogFalcoEvent"],(function(a,b,c,d,e,f,g){"use strict";f.CometPhotoEditorAddProductTag=a;var h,i=b("React"),j=h!==void 0?h:h=b("CometPhotoEditorAddProductTagQuery.graphql");f.sharedCatalogQuery=j;function a(a){var c=a.addTag,d=a.creationSessionID,e=a.existingTags,f=a.height,h=a.onOutsideClick,k=a.onSubmitted,l=a.photoID,m=a.queryReference,n=a.updateIdToProduct,o=a.width,p=a.xPos,q=a.yPos,r=i.useContext(b("PagesCometComposerContext")),s=r==null?void 0:r.catalogID,t=r==null?void 0:r.pageID;r=i.useState(!1);var u=r[0],v=r[1];r=i.useState(null);var w=r[0],x=r[1],y=i.useRef(null);r=i.useRef(null);var z=i.useReducer(function(a){return a+1});z[0];var A=z[1];z=b("CometRelay").usePreloadedQuery(j,m);z=Boolean(z==null?void 0:(m=z.page)==null?void 0:m.has_shared_catalog_segments);var B=p+b("CometProductTaggingConstants").DOT_HINT_PADDING+b("CometProductTaggingConstants").DOT_HINT_BORDER_SIZE+b("CometProductTaggingConstants").DOT_HINT_DOT_SIZE/2,C=q+b("CometProductTaggingConstants").DOT_HINT_PADDING+b("CometProductTaggingConstants").DOT_HINT_BORDER_SIZE+b("CometProductTaggingConstants").DOT_HINT_DOT_SIZE/2,D=i.useCallback(function(a){a={source:"manual",taggee:a,x:B/o*100,y:C/f*100};c(a);v(!0);k!=null&&k();w!=null&&x(null)},[B,o,C,f,c,k,w]),E=i.useCallback(function(a){if(!u){var c;if(((c=e)!=null?c:[]).map(function(a){return(a=a.taggee)==null?void 0:a.id}).includes(a.getKey())){((c=e)!=null?c:[]).map(function(b){var c;a.getKey()===((c=b.taggee)==null?void 0:c.id)&&(b.x=B/o*100,b.y=C/f*100)});return}c=a.getKey();var g=a.getLabel(),h=a.getPhotoURI(),i=a.getProductCurrentPrice(),j=(w==null?void 0:w.getRawData().catalogType)==="SHARED"?"SHARED_PRODUCT_ITEM":"SHOP_PRODUCT_ITEM";n(c,h,i);D({id:c,image_uri:h,name:g,product_price:i,taggee_type:"PRODUCT_ITEM"});t==null&&b("FBLogger")("composer_comet").warn("There is no page ID for product tagging logging event on photo editor click to tag product");b("ProductTagTypeaheadSelectProductFalcoEvent").log(function(){var a;return{creation_session_id:d,creator_id:(a=t)!=null?a:"",media_id:l,media_type:"photo",platform:"comet",product_type:j,referral_source:"composer"}})}},[d,e,f,t,l,w,D,u,n,o,B,C]),F=i.useCallback(function(a){b("ProductTagCatalogTypeaheadSelectCatalogFalcoEvent").log(function(){var a;return{creator_id:(a=t)!=null?a:"",media_id:l,media_type:"photo",platform:"comet",product_type:"SHARED_PRODUCT_ITEM",referral_source:"composer"}}),!u&&w==null&&x(a)},[t,l,w,u]),G=w===null&&z&&b("gkx")("1648353");m=i.useMemo(function(){return{catalogID:s}},[s]);var H=function(){x(null)};return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"pmk7jnqg",ref:function(a){var b=y.current;y.current=a;b==null&&A()},style:{left:a.xPos,top:a.yPos},children:i.jsx(b("CometPressable.react"),{"aria-label":g._("Dot for product tag"),display:"inline",onPress:a.onPress,overlayDisabled:!0,children:i.jsx(b("CometProductTagDotHint.react"),{borderSize:b("CometProductTaggingConstants").DOT_HINT_BORDER_SIZE,dotSize:b("CometProductTaggingConstants").DOT_HINT_DOT_SIZE,padding:b("CometProductTaggingConstants").DOT_HINT_PADDING})})}),y.current!=null&&i.jsx(b("CometPhotoViewerProductContext").Provider,{value:m,children:i.jsx(b("CometContextualLayer.react"),{align:"middle",context_DEPRECATED:y.current,imperativeRef:r,position:"below",children:i.jsx(b("CometSearchTypeaheadBaseViewStrategyEventListener.react"),{onOutsideClick:h,children:function(a){return i.jsx("div",{ref:a,children:G?i.jsx(b("CometProductTagCatalogTypeahead.react"),{media_id:l,onPressEntry:F,placeholder:g._("Search by a catalog name or a page name"),referral_source:"composer"}):i.jsx(b("CometProductTagTypeahead.react"),{media_id:l,onBack:H,onPressEntry:E,placeholder:g._("Search by product name or ID"),referral_source:"composer",sharedCatalog:w})})}})})})]})}}),null);