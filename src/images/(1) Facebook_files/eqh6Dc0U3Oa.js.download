if (self.CavalryLogger) { CavalryLogger.start_js(["VpjUE"]); }

__d("CometMisinfoSeeWhyDialogQuery$Parameters",[],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:"4653547357996304",metadata:{relayPreloadable:!0},name:"CometMisinfoSeeWhyDialogQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("CometWarningScreenOverlayBackground_data.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometWarningScreenOverlayBackground_data",selections:[{alias:null,args:null,kind:"ScalarField",name:"cover_style",storageKey:null}],type:"OverlayWarningScreenViewModel",abstractKey:null};e.exports=a}),null);
__d("CometWarningScreenOverlayCenterButton_data.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometWarningScreenOverlayCenterButton_data",selections:[{alias:null,args:null,kind:"ScalarField",name:"context",storageKey:null},{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"label",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometTextWithEntitiesRelay_textWithEntities"}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"render_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null}],type:"WarningScreenAction",abstractKey:null};e.exports=a}),null);
__d("CometWarningScreenOverlayContentDefaultFullCover_data.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{args:null,kind:"FragmentSpread",name:"CometTextWithEntitiesRelay_textWithEntities"}];return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometWarningScreenOverlayContentDefaultFullCover_data",selections:[{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"title",plural:!1,selections:a,storageKey:null},{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"subtitle",plural:!1,selections:a,storageKey:null},{alias:null,args:null,concreteType:"WarningScreenAction",kind:"LinkedField",name:"warning_screen_actions",plural:!0,selections:[{args:null,kind:"FragmentSpread",name:"CometWarningScreenOverlayCenterButton_data"}],storageKey:null},{args:null,kind:"FragmentSpread",name:"CometWarningScreenOverlayIcon_data"}],type:"OverlayWarningScreenViewModel",abstractKey:null}}();e.exports=a}),null);
__d("CometWarningScreenOverlayContentDefaultLightweight_data.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{args:null,kind:"FragmentSpread",name:"CometTextWithEntitiesRelay_textWithEntities"}];return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometWarningScreenOverlayContentDefaultLightweight_data",selections:[{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"title",plural:!1,selections:a,storageKey:null},{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"subtitle",plural:!1,selections:a,storageKey:null},{alias:null,args:null,concreteType:"WarningScreenAction",kind:"LinkedField",name:"warning_screen_actions",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},{args:null,kind:"FragmentSpread",name:"CometWarningScreenOverlayCenterButton_data"}],storageKey:null},{args:null,kind:"FragmentSpread",name:"CometWarningScreenOverlayIcon_data"}],type:"OverlayWarningScreenViewModel",abstractKey:null}}();e.exports=a}),null);
__d("CometWarningScreenOverlayContentDefault_data.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometWarningScreenOverlayContentDefault_data",selections:[{alias:null,args:null,kind:"ScalarField",name:"render_type",storageKey:null},{args:null,kind:"FragmentSpread",name:"CometWarningScreenOverlayContentDefaultLightweight_data"},{args:null,kind:"FragmentSpread",name:"CometWarningScreenOverlayContentDefaultFullCover_data"}],type:"OverlayWarningScreenViewModel",abstractKey:null};e.exports=a}),null);
__d("CometWarningScreenOverlayContentSmall_data.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometWarningScreenOverlayContentSmall_data",selections:[{alias:null,args:null,kind:"ScalarField",name:"render_type",storageKey:null},{args:null,kind:"FragmentSpread",name:"CometWarningScreenOverlayIcon_data"}],type:"OverlayWarningScreenViewModel",abstractKey:null};e.exports=a}),null);
__d("CometWarningScreenOverlayContent_data.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometWarningScreenOverlayContent_data",selections:[{args:null,kind:"FragmentSpread",name:"CometWarningScreenOverlayContentDefault_data"},{args:null,kind:"FragmentSpread",name:"CometWarningScreenOverlayContentSmall_data"}],type:"OverlayWarningScreenViewModel",abstractKey:null};e.exports=a}),null);
__d("CometWarningScreenOverlayCoveredResizable_data.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometWarningScreenOverlayCoveredResizable_data",selections:[{args:null,kind:"FragmentSpread",name:"CometWarningScreenOverlayCovered_data"}],type:"OverlayWarningScreenViewModel",abstractKey:null};e.exports=a}),null);
__d("CometWarningScreenOverlayCovered_data.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometWarningScreenOverlayCovered_data",selections:[{alias:null,args:null,kind:"ScalarField",name:"render_type",storageKey:null},{args:null,kind:"FragmentSpread",name:"CometWarningScreenOverlayBackground_data"},{args:null,kind:"FragmentSpread",name:"CometWarningScreenOverlayContent_data"}],type:"OverlayWarningScreenViewModel",abstractKey:null};e.exports=a}),null);
__d("CometWarningScreenOverlayIcon_data.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometWarningScreenOverlayIcon_data",selections:[{alias:null,args:[{kind:"Literal",name:"color",value:"fds-black"}],concreteType:"Image",kind:"LinkedField",name:"icon",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"scale",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'icon(color:"fds-black")'}],type:"OverlayWarningScreenViewModel",abstractKey:null};e.exports=a}),null);
__d("CometWarningScreenOverlay_data.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometWarningScreenOverlay_data",selections:[{alias:null,args:null,kind:"ScalarField",name:"render_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"top_objectionable_category",storageKey:null},{args:null,kind:"FragmentSpread",name:"CometWarningScreenOverlayCovered_data"},{args:null,kind:"FragmentSpread",name:"CometWarningScreenOverlayCoveredResizable_data"},{args:null,kind:"FragmentSpread",name:"useContentAndStoryIDsSanityCheck_data"}],type:"OverlayWarningScreenViewModel",abstractKey:null};e.exports=a}),null);
__d("useContentAndStoryIDsSanityCheck_data.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useContentAndStoryIDsSanityCheck_data",selections:[{alias:null,args:null,kind:"ScalarField",name:"content_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"container_story_id",storageKey:null}],type:"OverlayWarningScreenViewModel",abstractKey:null};e.exports=a}),null);
__d("CometRemote360PhotoViewer_photo.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometRemote360PhotoViewer_photo",selections:[{alias:null,args:null,concreteType:"PhotoEncoding",kind:"LinkedField",name:"photo_encodings",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"projection_type",storageKey:null},{alias:null,args:null,concreteType:"PhotosphereMetadata",kind:"LinkedField",name:"spherical_metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"cropped_area_image_height_pixels",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cropped_area_image_width_pixels",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"full_pano_height_pixels",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"full_pano_width_pixels",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"initial_horizontal_fov_degrees",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"initial_vertical_fov_degrees",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"initial_view_heading_degrees",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"initial_view_pitch_degrees",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"max_tile_level",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],type:"Photo",abstractKey:null};e.exports=a}),null);
__d("CometRemote3DPhotoViewer_photo.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometRemote3DPhotoViewer_photo",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"immersive_photo_encodings",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"projection_type",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"binary_cdn_uri",storageKey:null}],type:"PhotoEncoding3D",abstractKey:null}],storageKey:null}],type:"Photo",abstractKey:null};e.exports=a}),null);
__d("Comet360PhotoTiledCubemapDataProvider_tileUriQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"id"},{defaultValue:null,kind:"LocalArgument",name:"tileInfoList"}],b=[{kind:"Variable",name:"id",variableName:"id"}],c={kind:"InlineFragment",selections:[{alias:null,args:[{kind:"Variable",name:"tile_info_list",variableName:"tileInfoList"}],concreteType:"PhotoTile",kind:"LinkedField",name:"tiles",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:null}],type:"PhotoEncoding",abstractKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"Comet360PhotoTiledCubemapDataProvider_tileUriQuery",selections:[{alias:null,args:b,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[c],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"Comet360PhotoTiledCubemapDataProvider_tileUriQuery",selections:[{alias:null,args:b,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},c],storageKey:null}]},params:{id:"3714281145266614",metadata:{},name:"Comet360PhotoTiledCubemapDataProvider_tileUriQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("CometPhotoViewer_photo.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},b=[a];return{argumentDefinitions:[{kind:"RootArgument",name:"scale"}],kind:"Fragment",metadata:null,name:"CometPhotoViewer_photo",selections:[a,{alias:null,args:null,kind:"ScalarField",name:"can_viewer_add_tags",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"owner",plural:!1,selections:[a,{kind:"InlineFragment",selections:[{alias:"user_id",args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:"additional_profile_has_taggable_products",args:null,kind:"ScalarField",name:"has_taggable_products",storageKey:null}],type:"User",abstractKey:null},{kind:"InlineFragment",selections:[{alias:"page_id",args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_viewer_admin",storageKey:null},{alias:"page_shop_has_taggable_products",args:null,kind:"ScalarField",name:"has_taggable_products",storageKey:null}],type:"Page",abstractKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"created_time",storageKey:null},{alias:null,args:[{kind:"Literal",name:"context",value:"comet_media_viewer"},{kind:"Literal",name:"height",value:1e6},{kind:"Variable",name:"scale",variableName:"scale"},{kind:"Literal",name:"width",value:1e6}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"immersive_photo_encodings",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"projection_type",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ProductTag",kind:"LinkedField",name:"photo_product_tags",plural:!0,selections:b,storageKey:null},{alias:null,args:null,concreteType:"PhotoTagsConnection",kind:"LinkedField",name:"tags",plural:!1,selections:[{alias:null,args:null,concreteType:"PhotoTagsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"PhotoTag",kind:"LinkedField",name:"tag",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_product_tag",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"container_story",plural:!1,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"post_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"encrypted_tracking",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"viewability_config",storageKey:null},{alias:null,args:null,concreteType:"CometClientViewConfig",kind:"LinkedField",name:"client_view_config",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"can_delay_log_impression",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"use_banzai_signal_imp",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"use_banzai_vital_imp",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:[{kind:"Literal",name:"framework",value:"WARNING_SCREENS"},{kind:"Literal",name:"location",value:"photo_viewer"}],concreteType:"CIXScreen",kind:"LinkedField",name:"cix_screen",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"view_model",plural:!1,selections:[{kind:"InlineFragment",selections:[{documentName:"CometPhotoViewer_photo",fragmentName:"CometWarningScreenOverlay_data",fragmentPropName:"data",kind:"ModuleImport"}],type:"OverlayWarningScreenViewModel",abstractKey:null}],storageKey:null}],storageKey:'cix_screen(framework:"WARNING_SCREENS",location:"photo_viewer")'},{args:null,kind:"FragmentSpread",name:"CometRemote360PhotoViewer_photo"},{args:null,kind:"FragmentSpread",name:"CometRemote3DPhotoViewer_photo"},{kind:"InlineDataFragmentSpread",name:"CometAIProductTagSuggestionsUtil_photo",selections:[a,{alias:null,args:null,concreteType:"ProductTag",kind:"LinkedField",name:"photo_product_tags",plural:!0,selections:[a,{alias:null,args:null,concreteType:"ProductItem",kind:"LinkedField",name:"product_item",plural:!1,selections:b,storageKey:null},{alias:null,args:null,concreteType:"Vect2",kind:"LinkedField",name:"xy_location",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null}],storageKey:null}],storageKey:null}]}],type:"Photo",abstractKey:null}}();e.exports=a}),null);
__d("CometMisinfoSeeWhyDialogEntryPoint.entrypoint",["CometMisinfoSeeWhyDialogQuery$Parameters","JSResourceForInteraction","WebPixelRatio"],(function(a,b,c,d,e,f){"use strict";a={getPreloadProps:function(a){var c;a=a.entID;a=(c=a)==null?void 0:c.split(":").filter(function(a){return a!==""}).pop();return{extraProps:{entID:a},queries:{cometMisinfoSeeWhyDialogQueryReference:{parameters:b("CometMisinfoSeeWhyDialogQuery$Parameters"),variables:{entID:a,scale:b("WebPixelRatio").get()}}}}},root:b("JSResourceForInteraction")("CometMisinfoSeeWhyDialog.react").__setRef("CometMisinfoSeeWhyDialogEntryPoint.entrypoint")};e.exports=a}),null);
__d("CometWarningScreenOverlayBackground.react",["CometBlurredBackgroundImage.react","CometRelay","React","stylex","CometWarningScreenOverlayBackground_data.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=b("React");function a(a){var c=b("CometRelay").useFragment(g!==void 0?g:g=b("CometWarningScreenOverlayBackground_data.graphql"),a.data);c=c.cover_style;a=a.mediaUri;switch(c){case"PLAIN":return h.jsx("div",{className:"kr520xx4 j9ispegn pmk7jnqg hzruof5a n7fi1qx3 i09qtzwb d6rk862h"});case"GRADIENT":return h.jsx("div",{className:"kr520xx4 j9ispegn pmk7jnqg hzruof5a n7fi1qx3 i09qtzwb njqljl3s"});case"REVERSE_GRADIENT":return h.jsx("div",{className:"kr520xx4 j9ispegn pmk7jnqg hzruof5a n7fi1qx3 i09qtzwb qpkeyiwh"});case"BLUR":return h.jsxs("div",{className:"j102wcjv kr520xx4 j9ispegn pmk7jnqg hzruof5a n7fi1qx3 i09qtzwb",children:[h.jsx(b("CometBlurredBackgroundImage.react"),{src:a}),h.jsx("div",{className:"kr520xx4 j9ispegn pmk7jnqg hzruof5a n7fi1qx3 i09qtzwb d6rk862h"})]});case"NONE":default:return h.jsx("div",{className:"kr520xx4 j9ispegn pmk7jnqg hzruof5a n7fi1qx3 i09qtzwb"})}}}),null);
__d("useCometMisInfoDialog",["CometMisinfoSeeWhyDialogEntryPoint.entrypoint","useCometEntryPointDialog"],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(a){a=b("useCometEntryPointDialog")(b("CometMisinfoSeeWhyDialogEntryPoint.entrypoint"),a);var c=a[0];a=a[1];return[c,a]}}),null);
__d("CometWarningScreenOverlayCenterButton.react",["CometRelay","CometTextWithEntitiesRelay.react","React","TetraButton.react","recoverableViolation","stylex","useCometMisInfoDialog","useCometUFIVideoPlayerStateAndController","CometWarningScreenOverlayCenterButton_data.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=b("React");function i(a,b){switch(a){case"overlay":switch(b){case"PRIMARY":return"overlay";case"SECONDARY":return"fdsOverride_black";case null:return"overlay"}break;case"card":return"secondary"}return"overlay"}function a(a){var c,d=b("useCometUFIVideoPlayerStateAndController")(),e=b("CometRelay").useFragment(g!==void 0?g:g=b("CometWarningScreenOverlayCenterButton_data.graphql"),a.data);c=b("useCometMisInfoDialog")({entID:(c=a.contentID)!=null?c:"",storyID:a.storyID});var f=c[0];c=c[1];var j=e.label,k=e.render_type,l=e.type;if(j==null||l==null){b("recoverableViolation")("Empty data passed","comet_warning_screens");return null}l==="OPEN_MISINFO_SEE_WHY_DIALOG"&&a.storyID==null&&b("recoverableViolation")("No story ID for misinfo","comet_warning_screens");if(l==="OPEN_MISINFO_SEE_WHY_DIALOG"&&a.contentID==null){b("recoverableViolation")("No content ID for misinfo","comet_warning_screens");return null}var m={};switch(l){case"OPEN_MISINFO_SEE_WHY_DIALOG":m={onPress:function(){a.logAction("OPEN_MISINFO_SEE_WHY_DIALOG"),f({})},ref:c};break;case"SHOW_CONTENT":m={onPress:function(){d&&d.controller.play("warning_screen_cover"),a.logAction("SHOW_CONTENT"),a.showContent()},testid:"CometWarningScreen-ShowContent"};break;default:m={linkProps:{target:"_blank",url:e.context},onPress:function(){a.logAction("HELP_CENTER_REDIRECT")}};break}return h.jsx("div",{className:"oqcyycmt q9uorilb",children:h.jsx(b("TetraButton.react"),babelHelpers["extends"]({label:h.jsx(b("CometTextWithEntitiesRelay.react"),{textWithEntities:j}),size:"medium",type:i(a.type,k)},m))})}}),null);
__d("CometWarningScreenOverlayIcon.react",["CometRelay","React","TetraIcon.react","TintableIconSource","coerceRelayImage","unrecoverableViolation","CometWarningScreenOverlayIcon_data.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=b("React");function a(a){var c=b("CometRelay").useFragment(g!==void 0?g:g=b("CometWarningScreenOverlayIcon_data.graphql"),a.data);if(c.icon==null)throw b("unrecoverableViolation")("Icon missing for Warning Screen","comet_frx");c=new(b("TintableIconSource"))("FB",b("coerceRelayImage")(c.icon),24);return h.jsx(b("TetraIcon.react"),{color:a.color,icon:c,size:24})}}),null);
__d("CometWarningScreenOverlayContentDefaultFullCover.react",["CometFeedAttachmentOverlayContext","CometRelay","CometRowItem.react","CometTextWithEntitiesRelay.react","CometWarningScreenOverlayCenterButton.react","CometWarningScreenOverlayIcon.react","React","TetraRow.react","TetraText.react","TetraTextPairing.react","stylex","CometWarningScreenOverlayContentDefaultFullCover_data.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=b("React");function a(a){var c,d=b("CometRelay").useFragment(g!==void 0?g:g=b("CometWarningScreenOverlayContentDefaultFullCover_data.graphql"),a.data),e=b("CometFeedAttachmentOverlayContext").useShowOverlay(),f=a.storyID,i=d.title,j=d.subtitle;return h.jsx("div",{className:"j102wcjv kr520xx4 j9ispegn pmk7jnqg dati1w0a ihqw7lf3 hv4rvrfc discj3wi ggxiycxj hihg3u9x cbu4d94t n7fi1qx3 j83agx80 i09qtzwb",ref:(c=a.containerRefs)==null?void 0:c.overlayContainerRef,children:h.jsx("div",{className:"taijpn5t buofh1pr j83agx80 bp9cbjyn",ref:(c=a.containerRefs)==null?void 0:c.contentContainerRef,children:h.jsx(b("TetraTextPairing.react"),{body:h.jsxs(h.Fragment,{children:[j!=null?h.jsx(b("TetraText.react"),{color:"white",type:"body3",children:h.jsx(b("CometTextWithEntitiesRelay.react"),{textWithEntities:j})}):null,d.warning_screen_actions.length>0?h.jsx("div",{className:"mrt03zmi discj3wi b3onmgus ph5uu5jm",children:h.jsx(b("TetraRow.react"),{align:"center",spacing:12,children:d.warning_screen_actions.map(function(c,d){return h.jsx(b("CometRowItem.react"),{expanding:!1,children:h.jsx(b("CometWarningScreenOverlayCenterButton.react"),{contentID:a.contentID,data:c,logAction:a.logAction,showContent:function(){return e(!1)},storyID:f,type:"overlay"})},d)})})}):null]}),bodyColor:"white",headline:i!=null?h.jsx(b("CometTextWithEntitiesRelay.react"),{textWithEntities:i}):null,headlineColor:"white",level:3,meta:h.jsx(b("CometWarningScreenOverlayIcon.react"),{color:"white",data:d}),metaLocation:"above",textAlign:"center"})})})}}),null);
__d("useLightWeightCardOffset",["CometRouteRenderType","React","useResizeObserver"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React"),h=552,i=88,j=16,k=i+j,l=48;function a(a){var c=a.isFullScreenMediaPlayerStyle,d=b("CometRouteRenderType").useIsPushView();a=g.useRef(null);var e=g.useState(0),f=e[0],m=e[1],n=g.useCallback(function(a){if(c&&d){a=Math.max(a-h,0);a=a/2;a=Math.max(i,Math.min(a,k));a=(k-a)/j;a=a*l;m(a)}},[c,d,m]);e=b("useResizeObserver")(function(a){return n(a.width)});e(a.current);return{ref:a,vertical:f}}}),null);
__d("CometWarningScreenOverlayContentDefaultLightweight.react",["ix","CometCard.react","CometFeedAttachmentOverlayContext","CometRelay","CometRow.react","CometRowItem.react","CometStyleXSheet","CometTextWithEntitiesRelay.react","CometWarningScreenOverlayCenterButton.react","CometWarningScreenOverlayIcon.react","React","TetraCircleButton.react","TetraText.react","TetraTextPairing.react","fbicon","stylex","useLightWeightCardOffset","CometWarningScreenOverlayContentDefaultLightweight_data.graphql"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h,i=b("React"),j=(c=b("CometStyleXSheet").CometStyleXSheet==null?void 0:b("CometStyleXSheet").CometStyleXSheet.DARK_MODE_CLASS_NAME)!=null?c:"";function a(a){var c,d=b("CometRelay").useFragment(h!==void 0?h:h=b("CometWarningScreenOverlayContentDefaultLightweight_data.graphql"),a.data),e=b("CometFeedAttachmentOverlayContext").useShowOverlay(),f=a.logAction,k=i.useCallback(function(){e(!1),f("SHOW_CONTENT")},[e,f]),l=a.storyID,m=d.title,n=d.subtitle,o=d.warning_screen_actions.filter(function(a){return a.type!=="SHOW_CONTENT"}),p=a.isFullScreenMediaPlayerStyle,q=b("useLightWeightCardOffset")({isFullScreenMediaPlayerStyle:a.isFullScreenMediaPlayerStyle});return i.jsx("div",{className:"kr520xx4 j9ispegn pmk7jnqg hzruof5a ggxiycxj hihg3u9x cbu4d94t n7fi1qx3 j83agx80 i09qtzwb",ref:(c=a.containerRefs)==null?void 0:c.overlayContainerRef,style:{bottom:-q.vertical,top:q.vertical},children:i.jsx("div",{className:"j9ispegn pmk7jnqg oqq733wu dati1w0a ihqw7lf3 hv4rvrfc discj3wi ggxiycxj hihg3u9x taijpn5t cbu4d94t n7fi1qx3 j83agx80 bp9cbjyn"+(a.isFullScreenMediaPlayerStyle?" kr520xx4":" i09qtzwb"),ref:q.ref,children:i.jsx("div",{className:a.isFullScreenMediaPlayerStyle?"k4urcfbm lvkh322w":"k4urcfbm",children:i.jsx("div",{className:p?j:null,children:i.jsx(b("CometCard.react"),{background:"white",border:"solid",dropShadow:2,children:i.jsx("div",{className:"b3onmgus e5nlhep0 ph5uu5jm ecm0bbzt",ref:(c=a.containerRefs)==null?void 0:c.contentContainerRef,children:i.jsxs("div",{className:"ihqw7lf3",children:[i.jsxs(b("CometRow.react"),{align:"start",expanding:!0,children:[i.jsx(b("CometRowItem.react"),{children:i.jsx("div",{className:"hcukyx3x cxmmr5t8",children:i.jsx(b("CometWarningScreenOverlayIcon.react"),{color:"primary",data:d})})}),(m!=null||n!=null)&&i.jsx(b("CometRowItem.react"),{expanding:!0,children:i.jsx("div",{className:"s7sz1jes aahdfvyu",children:i.jsx(b("TetraTextPairing.react"),{body:n!=null&&i.jsx(b("TetraText.react"),{color:"primary",type:"body3",children:i.jsx(b("CometTextWithEntitiesRelay.react"),{textWithEntities:n})}),headline:m&&i.jsx(b("TetraText.react"),{color:"primary",type:"bodyLink3",children:i.jsx(b("CometTextWithEntitiesRelay.react"),{textWithEntities:m})}),level:3})})})]}),o.length>0&&i.jsx(b("CometRow.react"),{wrap:"forward",children:i.jsx(b("CometRowItem.react"),{expanding:!0,children:o.map(function(c,d){return i.jsx(b("CometRowItem.react"),{expanding:!1,children:i.jsx(b("CometWarningScreenOverlayCenterButton.react"),{contentID:a.contentID,data:c,logAction:a.logAction,showContent:function(){},storyID:l,type:"card"})},d)})})}),i.jsx("div",{className:"kr520xx4 pmk7jnqg tw6a2znq f10w8fjw d1544ag0 pybr56ya n7fi1qx3",children:i.jsx(b("TetraCircleButton.react"),{color:"black",icon:b("fbicon")._(g("478232"),16),label:"Close",onPress:k,size:32})})]})})})})})})})}}),null);
__d("CometWarningScreenOverlayContentDefault.react",["CometRelay","CometWarningScreenOverlayContentDefaultFullCover.react","CometWarningScreenOverlayContentDefaultLightweight.react","React","CometWarningScreenOverlayContentDefault_data.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=b("React");function a(a){var c=a.containerRefs,d=a.contentID,e=a.data,f=a.isFullScreenMediaPlayerStyle,i=a.logAction,j=a.storyID;a=a.url;e=b("CometRelay").useFragment(g!==void 0?g:g=b("CometWarningScreenOverlayContentDefault_data.graphql"),e);switch(e.render_type){case"LIGHTWEIGHT":return h.jsx(b("CometWarningScreenOverlayContentDefaultLightweight.react"),{containerRefs:c,contentID:d,data:e,isFullScreenMediaPlayerStyle:f,logAction:i,storyID:j,url:a});case"FULL_COVER":default:return h.jsx(b("CometWarningScreenOverlayContentDefaultFullCover.react"),{containerRefs:c,contentID:d,data:e,logAction:i,storyID:j,url:a})}}}),null);
__d("CometWarningScreenOverlayContentSmall.react",["fbt","CometPressable.react","CometRelay","CometWarningScreenOverlayIcon.react","React","stylex","useCometRouterDispatcher","CometWarningScreenOverlayContentSmall_data.graphql"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h,i,j=b("React"),k={content:{alignItems:"bp9cbjyn",display:"j83agx80",flexGrow:"buofh1pr",justifyContent:"taijpn5t"},intercepter:{bottom:"i09qtzwb",end:"n7fi1qx3",position:"pmk7jnqg",start:"j9ispegn",top:"kr520xx4",":active":{transform:"tm8avpzi"}},overlayContainer:{bottom:"i09qtzwb",display:"j83agx80",end:"n7fi1qx3",flexDirection:"cbu4d94t",overflowX:"hihg3u9x",overflowY:"ggxiycxj",paddingTop:"discj3wi",paddingEnd:"hv4rvrfc",paddingBottom:"ihqw7lf3",paddingStart:"dati1w0a",position:"pmk7jnqg",start:"j9ispegn",top:"kr520xx4",zIndex:"j102wcjv"},overlayContainerSmall:{paddingTop:"jb3vyjys",paddingEnd:"rz4wbd8a",paddingBottom:"qt6c0cv9",paddingStart:"a8nywdso",pointerEvents:"hzruof5a"}};function a(a){var c,d=b("CometRelay").useFragment(h!==void 0?h:h=b("CometWarningScreenOverlayContentSmall_data.graphql"),a.data),e=b("useCometRouterDispatcher")();if(d.render_type==="LIGHTWEIGHT")return null;var f=a.logAction,l=a.url,m=l!=null?j.jsx(b("CometPressable.react"),{"aria-label":g._("Cover,sensitive content in album"),display:"block",hideHoverOverlay:!0,onPress:function(a){e!=null&&(f("OPEN_CONTENT_VIEWER"),e.go(l,{}),a.preventDefault())},xstyle:k.intercepter}):null;return j.jsxs("div",{children:[j.jsx("div",{className:(i||(i=b("stylex")))(k.overlayContainer,k.overlayContainerSmall),ref:(c=a.containerRefs)==null?void 0:c.overlayContainerRef,children:j.jsx("div",{className:i(k.content),ref:(c=a.containerRefs)==null?void 0:c.contentContainerRef,children:j.jsx(b("CometWarningScreenOverlayIcon.react"),{color:"white",data:d})})}),m]})}}),null);
__d("CometWarningScreenOverlayContent.react",["CometRelay","CometWarningScreenOverlayContentDefault.react","CometWarningScreenOverlayContentSmall.react","React","CometWarningScreenOverlayContent_data.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=b("React");function a(a){var c=b("CometRelay").useFragment(g!==void 0?g:g=b("CometWarningScreenOverlayContent_data.graphql"),a.data);switch(a.layout){case"SMALL":return h.jsx(b("CometWarningScreenOverlayContentSmall.react"),{containerRefs:a.containerRefs,contentID:a.contentID,data:c,logAction:a.logAction,storyID:a.storyID,url:a.url});case"DEFAULT":default:return h.jsx(b("CometWarningScreenOverlayContentDefault.react"),{containerRefs:a.containerRefs,contentID:a.contentID,data:c,isFullScreenMediaPlayerStyle:a.isFullScreenMediaPlayerStyle,logAction:a.logAction,storyID:a.storyID,url:a.url})}}}),null);
__d("CometWarningScreenOverlayCovered.react",["CometFeedAttachmentOverlayContext","CometRelay","CometWarningScreenOverlayBackground.react","CometWarningScreenOverlayContent.react","React","CometWarningScreenOverlayCovered_data.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=b("React");function a(a){var c=b("CometRelay").useFragment(g!==void 0?g:g=b("CometWarningScreenOverlayCovered_data.graphql"),a.data),d=c.render_type!=="LIGHTWEIGHT",e=b("CometFeedAttachmentOverlayContext").useMakeContentVisibleDespiteOverlay();h.useEffect(function(){e(!d)},[e,d]);return h.jsxs(h.Fragment,{children:[d&&h.jsx(b("CometWarningScreenOverlayBackground.react"),{data:c,mediaUri:a.mediaUri}),h.jsx(b("CometWarningScreenOverlayContent.react"),{containerRefs:a.containerRefs,contentID:a.contentID,data:c,isFullScreenMediaPlayerStyle:a.isFullScreenMediaPlayerStyle,layout:a.layout,logAction:a.logAction,storyID:a.storyID,url:a.url})]})}}),null);
__d("useWarningScreenLayout",["React"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(){var a=g.useState("DEFAULT"),b=a[0],c=a[1],d=g.useRef(null),e=g.useRef(null);g.useLayoutEffect(function(){if(d.current==null||e.current==null)return;d.current!=null&&e.current!=null&&(d.current.clientHeight-e.current.clientHeight<=0&&c("SMALL"))},[d,e]);return[b,{contentContainerRef:e,overlayContainerRef:d}]}}),null);
__d("CometWarningScreenOverlayCoveredResizable.react",["CometRelay","CometWarningScreenOverlayCovered.react","React","useWarningScreenLayout","CometWarningScreenOverlayCoveredResizable_data.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=b("React");function a(a){var c=b("CometRelay").useFragment(g!==void 0?g:g=b("CometWarningScreenOverlayCoveredResizable_data.graphql"),a.data),d=b("useWarningScreenLayout")(),e=d[0];d=d[1];return h.jsx(b("CometWarningScreenOverlayCovered.react"),{containerRefs:d,contentID:a.contentID,data:c,isFullScreenMediaPlayerStyle:a.isFullScreenMediaPlayerStyle,layout:e,logAction:a.logAction,mediaUri:a.mediaUri,storyID:a.storyID,url:a.url})}}),null);
__d("CometWarningScreenOverlayUncovered.react",["ix","fbt","CometFeedAttachmentOverlayContext","CometRouteRenderType","React","TetraCircleButton.react","fbicon","stylex","unrecoverableViolation","useCometRouterState","useCometUFIVideoPlayerStateAndController"],(function(a,b,c,d,e,f,g,h){"use strict";e.exports=a;var i,j=b("React"),k={showOverlayButton:{end:"cypi58rs",position:"pmk7jnqg",top:"dn56xbwz"}};function a(a){var c=b("useCometUFIVideoPlayerStateAndController")(),d=b("CometFeedAttachmentOverlayContext").useShowOverlay(),e=b("useCometRouterState")();if(e==null)throw b("unrecoverableViolation")("Cannot render comet app with no route provider","comet_infra");e=b("CometRouteRenderType").useIsPushView();e=e&&a.xstyle!=null?a.xstyle:k.showOverlayButton;return j.jsx("div",{className:(i||(i=b("stylex")))(e),children:j.jsx(b("TetraCircleButton.react"),{icon:b("fbicon")._(g("511436"),24),label:h._("Show overlay"),onPress:function(){c&&c.controller.pause("warning_screen_cover"),d(!0),a.logAction("HIDE_CONTENT")},size:40,testid:void 0,type:"dark-overlay"})})}}),null);
__d("useContentAndStoryIDsSanityCheck",["CometRelay","FBLogger","React","gkx","useContentAndStoryIDsSanityCheck_data.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=b("React");function i(a){return a.split(":").filter(function(a){return a!==""}).pop()}function j(a){a=i(a);if(!Number.isNaN(parseInt(a,10)))return a;a=atob(a);return i(a)}function a(a){var c=a.contentID,d=a.data,e=a.storyID,f=b("gkx")("1761760");a=b("CometRelay").useFragment(g!==void 0?g:g=b("useContentAndStoryIDsSanityCheck_data.graphql"),d);var i=a.container_story_id,k=a.content_id;h.useEffect(function(){if(f){if(c!=null){var a=j(c);a!==k&&b("FBLogger")("warning_screens").mustfix("Expected Content ID from parent (%s) and View Model (%s) to be the same",a,k)}if(e!=null){a=j(e);a!==i&&b("FBLogger")("warning_screens").mustfix("Expected Story ID from parent (%s) and View Model (%s) to be the same",a,i)}}},[c,e,k,i,f])}}),null);
__d("CometWarningScreenOverlay.react",["CometFeedAttachmentOverlayContext","CometRelay","CometStoryRenderLocationContext.react","CometTimeSpentNavigation","CometWarningScreenClientLogger","CometWarningScreenOverlayCovered.react","CometWarningScreenOverlayCoveredResizable.react","CometWarningScreenOverlayUncovered.react","React","useContentAndStoryIDsSanityCheck","CometWarningScreenOverlay_data.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=b("React");function a(a){var c,d,e=b("CometRelay").useFragment(g!==void 0?g:g=b("CometWarningScreenOverlay_data.graphql"),a.data);b("useContentAndStoryIDsSanityCheck")({contentID:a.contentID,data:e,storyID:a.storyID});var f=a.storyID,i=a.contentID,j=a.mediaUri,k=a.surface,l=a.url,m=e.top_objectionable_category,n=e.render_type;c=(c=a.isFullScreenMediaPlayerStyle)!=null?c:!1;d=(d=a.allowReCoveringContent)!=null?d:!0;var o=b("CometFeedAttachmentOverlayContext").useIsOverlayShown(),p=b("CometFeedAttachmentOverlayContext").useSetParentRenderInstructions(),q=h.useContext(b("CometStoryRenderLocationContext.react")),r=b("CometTimeSpentNavigation").getPathInfo(),s=r?r.name:"";h.useEffect(function(){p(n==="LIGHTWEIGHT"?"CLIP_TO_PARENT":"CLIP_TO_MEDIA")},[n,p]);h.useEffect(function(){b("CometWarningScreenClientLogger").logWarningScreenEvent(null,i,s,"mounted",f,q,k,m,null,"warning_screens",n)},[i,s,f,q,k,m,n]);r=function(a){b("CometWarningScreenClientLogger").logWarningScreenEvent(a,i,s,"action",f,q,k,m,null,"warning_screens",n)};if(m==null)return null;if(o||(a==null?void 0:a.alwaysShowCoverComponent)===!0){o=a.alwaysShowDetails===!0;var t=a.alwaysUseSmallLayout===!0;if(t)return h.jsx(b("CometWarningScreenOverlayCovered.react"),{contentID:a.contentID,data:e,isFullScreenMediaPlayerStyle:c,layout:"SMALL",logAction:r,mediaUri:j,storyID:f,url:l});return o?h.jsx(b("CometWarningScreenOverlayCovered.react"),{contentID:a.contentID,data:e,isFullScreenMediaPlayerStyle:c,layout:"DEFAULT",logAction:r,mediaUri:j,storyID:f,url:l}):h.jsx(b("CometWarningScreenOverlayCoveredResizable.react"),{contentID:a.contentID,data:e,isFullScreenMediaPlayerStyle:c,logAction:r,mediaUri:j,storyID:f,url:l})}else if(d&&n!=="LIGHTWEIGHT")return h.jsx(b("CometWarningScreenOverlayUncovered.react"),{logAction:r,xstyle:a.xstyle});else return h.jsx("div",{})}}),null);
__d("Comet360GyroOverlay.react",["fbt","React","stylex"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h=b("React");function a(a){a=a.isVisible;return h.jsx("div",{className:"orwu60u2 e4zzj2sf art1omkt jowmb856 py2didcb rk01pc8j kfkz5moi pmk7jnqg hzruof5a rdkrh8wx"+(a?"":" b5wmifdl"),children:h.jsxs("div",{className:"orwu60u2 l9j0dhe7 rdkrh8wx spb7xbtv bkmhp75w emlxlaya s45kfl79 ora8z2hr",children:[h.jsxs("div",{className:"ljni7pan tftn3vyl tmxdrx1h sgaxgfmg pmk7jnqg cb02d2ww k0bpgpbk tpcyxxvw qtyiw8t4 qxh1up0x mk2mc5f4 s44p3ltw ccm00jje goun2846 spb7xbtv bkmhp75w emlxlaya s45kfl79 lnmqs56w a5q45dxh rn9xp8wz pby8v4dq dn16736b ee40wjg4 r7fvqmod oeefd0zo",children:[h.jsx("div",{className:"dt25yw6b cj5g2342 kfkz5moi pmk7jnqg j0lfo8lj jcgfde61 afxsp9o4 ed0hlay0 frvqaej8 mk2mc5f4 s44p3ltw ccm00jje goun2846 spb7xbtv bkmhp75w emlxlaya s45kfl79 gf5ws1nb bys8suo3 bahwbe4s tr12ve47 a5zjgiyk ob8axjtb ee40wjg4 r7fvqmod oeefd0zo"}),h.jsx("div",{className:"kzys8otq ke6wolob rk01pc8j pmk7jnqg derph8ux jcgfde61 afxsp9o4 ed0hlay0 frvqaej8 mk2mc5f4 s44p3ltw ccm00jje goun2846 spb7xbtv bkmhp75w emlxlaya s45kfl79 gf5ws1nb bys8suo3 bahwbe4s tr12ve47 nc12k21y cuyhpc0r ee40wjg4 r7fvqmod oeefd0zo"})]}),h.jsx("div",{className:"dt25yw6b g0qnabr5 cj5g2342 ginu6rux kfkz5moi pmk7jnqg stjgntxs ni8dbmo4 cb02d2ww spb7xbtv bkmhp75w emlxlaya s45kfl79 a5zjgiyk pm1owuca ee40wjg4 r7fvqmod oeefd0zo",children:h.jsx("span",{className:"dt25yw6b cj5g2342 oqcyycmt kfkz5moi pmk7jnqg b0hsfc2p cb02d2ww gfeo3gy3 ljqsnud1",children:g._("360")})})]})})}}),null);
__d("Comet360PhotoTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["Cylindrical","Equirectangular","TiledCubemap"]);f.Comet360PhotoProjection=a}),null);
__d("Comet360PhotoRenderer",[],(function(a,b,c,d,e,f){"use strict"}),null);
__d("createWebGLEquirectSphericalPhotoProgram",["CometWebGLProgram"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g="\nattribute vec3 a_position;\nattribute vec2 a_textureCoord;\n\nvarying highp vec2 v_textureCoord;\n\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\n\nvoid main() {\n    gl_Position = projectionMatrix * viewMatrix * vec4(a_position, 1);\n    v_textureCoord = a_textureCoord;\n}\n",h="\nvarying highp vec2 v_textureCoord;\n\nuniform sampler2D u_sampler;\n\nvoid main() {\n    gl_FragColor = texture2D(u_sampler, v_textureCoord);\n}\n";function a(a){var c=new(b("CometWebGLProgram"))(a);return c.addShader(g,a.VERTEX_SHADER).addShader(h,a.FRAGMENT_SHADER).compile()}}),null);
__d("CometWebGLSphericalMesh",["CometWebGLMesh","CometWebGLTexture","createWebGLEquirectSphericalPhotoProgram"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,c){var d=30,e=30;this.$1=a;this.$2=new(b("CometWebGLMesh"))(a,b("createWebGLEquirectSphericalPhotoProgram")(a));this.$3=new(b("CometWebGLTexture"))(a);this.$3.setSource(c,!1);this.$2.addAttribute("a_position");this.$2.addAttribute("a_textureCoord");a=this.$4(d,e);this.$2.bufferData(a);c=this.$5(d,e);this.$2.bufferIndex(c)}var c=a.prototype;c.draw=function(a,b){this.$2.setUniform("viewMatrix",a),this.$2.setUniform("projectionMatrix",b),this.$2.setUniform("u_sampler",this.$3),this.$2.program.use(),this.$2.draw()};c.$4=function(a,b){var c=2,d=[],e=600,f=300,g=600,h=300,i=0/h,j=0/g;f=f/h;h=e/g;for(var e=0;e<=a;e++){g=i+e/a*f;g=(.5-g)*Math.PI;var k=Math.sin(g);g=Math.cos(g);for(var l=0;l<=b;l++){var m=j+l/b*h;m=(m-.75)*2*Math.PI;var n=Math.sin(m);m=Math.cos(m);m=m*g;var o=k;n=n*g;d.push(c*m);d.push(c*o);d.push(c*n);m=l/b;o=e/a;d.push(m);d.push(o)}}return d};c.$5=function(a,b){var c=[];for(var d=0;d<a;d++)for(var e=0;e<b;e++){var f=d*(b+1)+e,g=f+b+1;c.push(f);c.push(g);c.push(f+1);c.push(g);c.push(g+1);c.push(f+1)}return c};return a}();e.exports=a}),null);
__d("Comet360PhotoSphericalRenderer",["Promise","Comet360PhotoRenderer","CometWebGLSphericalMesh"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,c,d){this.$1=a;this.$2=c;this.$3=d;c=this.$2.getImageForTexture();this.$4=new(b("CometWebGLSphericalMesh"))(a,c)}var c=a.prototype;c.initialize=function(){return new(b("Promise"))(function(a,b){a()})};c.draw=function(){var a=this.$1;a.clear(a.COLOR_BUFFER_BIT);this.$4.draw(this.$3.getViewMatrix(),this.$3.getProjectionMatrix())};return a}();e.exports=a}),null);
__d("Comet360PhotoTiledCubemapTile",[],(function(a,b,c,d,e,f){"use strict";f.hashCubemapTileInfo=a;function a(a){return"Level: "+a.level+"|Face: "+a.face+"|Col: "+a.col+"|Row: "+a.row}}),null);
__d("Comet360PhotoTiledCubemapTextureCache",["Comet360PhotoTiledCubemapTile","CometWebGLTexture","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a,this.$2=new Map()}var c=a.prototype;c.hasTexture=function(a){a=b("Comet360PhotoTiledCubemapTile").hashCubemapTileInfo(a);return this.$2.has(a)};c.getBestTileTexture=function(a){var c=a.level,d=a.col,e=a.row;while(c>=0){var f={col:d,face:a.face,level:c,row:e},g=b("Comet360PhotoTiledCubemapTile").hashCubemapTileInfo(f);g=this.$2.get(g);if(g!=null)return[g,f];c-=1;d=Math.floor(d/2);e=Math.floor(e/2)}throw b("unrecoverableViolation")('Unable to find a best texture for: "'+b("Comet360PhotoTiledCubemapTile").hashCubemapTileInfo(a)+'".',"immersive_media")};c.loadTexture=function(a,c){var d=null;c&&(d=new(b("CometWebGLTexture"))(this.$1),d.setSource(c,!0));this.$2.set(b("Comet360PhotoTiledCubemapTile").hashCubemapTileInfo(a),d)};return a}();e.exports=a}),null);
__d("Quaternions",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){var c=[0,0,0,1],d=Math.sin(b/2);c[0]=a[0]*d;c[1]=a[1]*d;c[2]=a[2]*d;c[3]=Math.cos(b/2);return c}function b(a,b,c){var d=[0,0,0,1],e=Math.cos(a/2),f=Math.cos(c/2),g=Math.cos(b/2);a=Math.sin(a/2);c=Math.sin(c/2);b=Math.sin(b/2);d[0]=a*f*g-e*c*b;d[1]=e*f*b+a*c*g;d[2]=e*c*g-a*e*b;d[3]=e*f*g+a*c*b;return d}function c(a){var b=Math.atan2(2*(a[3]*a[0]+a[1]*a[2]),1-2*(a[0]*a[0]+a[1]*a[1])),c=Math.asin(2*(a[3]*a[1]-a[2]*a[0]));a=Math.atan2(2*(a[3]*a[2]+a[0]*a[1]),1-2*(a[1]*a[1]+a[2]*a[2]));return[b,c,a]}function d(a,b){var c=[0,0,0,1];c[0]=b[3]*a[0]+b[0]*a[3]+b[1]*a[2]-b[2]*a[1];c[1]=b[3]*a[1]-b[0]*a[2]+b[1]*a[3]+b[2]*a[0];c[2]=b[3]*a[2]+b[0]*a[1]-b[1]*a[0]+b[2]*a[3];c[3]=b[3]*a[3]-b[0]*a[0]-b[1]*a[1]-b[2]*a[2];return c}f={multiply:d,quaternionFromAxisAngle:a,quaternionFromTaitBryan:b,taitBryanFromQuaternion:c};e.exports=f}),null);
__d("createWebGLTiledCubemapTileProgram",["CometWebGLProgram"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g="\nattribute vec3 a_position;\nattribute vec3 a_color;\nattribute vec2 a_texcoord;\n\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\n\nuniform vec2 u_uvOffset;\nuniform float u_uvScale;\nuniform vec2 u_uvOffsetBackground;\nuniform float u_uvScaleBackground;\n\nvarying vec4 v_worldPosition;\nvarying vec2 v_texcoord;\nvarying vec2 v_backgroundTexcoord;\nvarying vec3 v_color;\n\nvoid main() {\n  v_texcoord = a_texcoord * u_uvScale + u_uvOffset;\n  v_backgroundTexcoord = a_texcoord * u_uvScaleBackground + u_uvOffsetBackground;\n  v_worldPosition = modelMatrix * vec4(a_position, 1.0);\n  gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(a_position, 1.0);\n}\n",h="\nprecision mediump float;\n\nvarying vec4 v_worldPosition;\nvarying vec2 v_texcoord;\nvarying vec2 v_backgroundTexcoord;\n\nuniform sampler2D u_tileTexture;\nuniform sampler2D u_backgroundTexture;\nuniform vec2 u_horizontalAngleBounds;\nuniform vec2 u_verticalAngleBounds;\n\nvoid main() {\n  // Use the world position of the fragment to compute where it lies\n  // in terms of horizontal and vertical angles.\n  float hAngle = atan(v_worldPosition.x, -1.0 * v_worldPosition.z);\n  float vAngle = atan(v_worldPosition.y, sqrt(v_worldPosition.x * v_worldPosition.x + v_worldPosition.z * v_worldPosition.z));\n\n  // If this fragment is out of bounds, use the color of the background texture\n  // which is the Level 0 face texture. Otherwise, use the color of the texture\n  // given to be displayed.\n  if (hAngle > u_horizontalAngleBounds.x &&\n      hAngle < u_horizontalAngleBounds.y &&\n      vAngle > u_verticalAngleBounds.x &&\n      vAngle < u_verticalAngleBounds.y) {\n    gl_FragColor = texture2D(u_tileTexture, v_texcoord);\n  } else {\n    gl_FragColor = texture2D(u_backgroundTexture, v_backgroundTexcoord);\n  }\n}\n";function a(a){var c=new(b("CometWebGLProgram"))(a);return c.addShader(g,a.VERTEX_SHADER).addShader(h,a.FRAGMENT_SHADER).compile()}}),null);
__d("CometWebGLCubemapTileMesh",["CometWebGLMesh","Matrices","Quaternions","createWebGLTiledCubemapTileProgram","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";var g={MINUS_X:0,MINUS_Y:5,MINUS_Z:1,PLUS_X:2,PLUS_Y:4,PLUS_Z:3},h=1;a=function(){function a(a,c,d,e,f){this.$1=a;this.$3=c;this.$5=d;this.$2=new(b("CometWebGLMesh"))(a,b("createWebGLTiledCubemapTileProgram")(a),{interleaved:!1});this.$2.addAttribute("a_position",{offset:0});this.$2.addAttribute("a_texcoord",{offset:48});c=[1,1,-.5,0,1,-.5,0,0,-.5,1,0,-.5,1,1,0,1,0,0,1,0];this.$2.bufferData(c);this.$2.bufferIndex([0,1,2,2,3,0]);d=1/Math.pow(2,this.$3.level);a=b("Matrices").createScalingMatrix(d,d,1);c=this.$6(this.$3.face);d=this.$7(this.$3.level,this.$3.col,this.$3.row);a=b("Matrices").multiplyMat4(b("Matrices").multiplyMat4(a,d),c);this.$4=a;this.$2.setUniform("modelMatrix",this.$4);this.$2.setUniform("u_horizontalAngleBounds",[].concat(e));this.$2.setUniform("u_verticalAngleBounds",[].concat(f))}var c=a.prototype;c.draw=function(a,b){this.$2.setUniform("viewMatrix",a);this.$2.setUniform("projectionMatrix",b);a=this.$5.getBestTileTexture(this.$3);b=a[0];a=a[1];a=this.$8(a);var c=a[0];a=a[1];this.$2.setUniform("u_tileTexture",b);this.$2.setUniform("u_uvScale",a);this.$2.setUniform("u_uvOffset",[].concat(c));b={col:0,face:this.$3.face,level:0,row:0};a=this.$5.getBestTileTexture(b);c=a[0];a[1];a=this.$8(b);b=a[0];a=a[1];this.$2.setUniform("u_backgroundTexture",c);this.$2.setUniform("u_uvScaleBackground",a);this.$2.setUniform("u_uvOffsetBackground",[].concat(b));this.$2.program.use();this.$2.draw()};c.$6=function(a){switch(a){case g.PLUS_X:return b("Matrices").createRotationMatrixFromQuaternion(b("Quaternions").quaternionFromTaitBryan(0,-Math.PI/2,0));case g.MINUS_X:return b("Matrices").createRotationMatrixFromQuaternion(b("Quaternions").quaternionFromTaitBryan(0,Math.PI/2,0));case g.PLUS_Y:return b("Matrices").multiplyMat4(b("Matrices").createRotationMatrixFromQuaternion(b("Quaternions").quaternionFromTaitBryan(0,0,Math.PI)),b("Matrices").createRotationMatrixFromQuaternion(b("Quaternions").quaternionFromTaitBryan(Math.PI/2,0,0)));case g.MINUS_Y:return b("Matrices").multiplyMat4(b("Matrices").createRotationMatrixFromQuaternion(b("Quaternions").quaternionFromTaitBryan(0,0,Math.PI)),b("Matrices").createRotationMatrixFromQuaternion(b("Quaternions").quaternionFromTaitBryan(-Math.PI/2,0,0)));case g.PLUS_Z:return b("Matrices").createRotationMatrixFromQuaternion(b("Quaternions").quaternionFromTaitBryan(0,Math.PI,0));case g.MINUS_Z:return b("Matrices").createIdentityMat4();default:throw b("unrecoverableViolation")("Unexpected cube face index: "+a,"immersive_media")}};c.$8=function(a){a=this.$3.level-a.level;if(a===0)return[[0,0],1];a=1/Math.pow(2,a);var b=1*a,c=[b*this.$3.col,b*this.$3.row];c[1]=1-b-c[1];return[c,a]};c.$7=function(a,c,d){a=h/Math.pow(2,a);var e=h/2;c=[c*a,d*a];c[1]=1-a-c[1];d=-e;return b("Matrices").createTranslationMatrix(c[0]+d,c[1]+d,0)};c.$9=function(a){switch(a){case g.PLUS_X:return[1,0,0];case g.MINUS_X:return[.6,0,0];case g.PLUS_Y:return[0,1,0];case g.MINUS_Y:return[0,.6,0];case g.PLUS_Z:return[0,0,1];case g.MINUS_Z:return[0,0,.6];default:throw b("unrecoverableViolation")("Unexpected cube face index: "+a,"immersive_media")}};return a}();e.exports=a}),null);
__d("Comet360PhotoTiledCubemapRenderer",["Promise","Comet360PhotoRenderer","Comet360PhotoTiledCubemapTextureCache","Comet360PhotoTiledCubemapTile","CometWebGLCubemapTileMesh","promiseDone"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,c,d,e){this.$1=a;this.$3=d;this.$2=c;this.$4=e;this.$6=new(b("Comet360PhotoTiledCubemapTextureCache"))(this.$1);this.$5=new Map();this.$7=!1;a=this.$2.horizontalFov();d=this.$2.verticalFov();this.$8=[-a/2,a/2];this.$9=[-d/2,d/2]}var c=a.prototype;c.initialize=function(){return this.$10()};c.draw=function(){var a=this;if(!this.$7)return;var c=this.$1;c.clear(c.COLOR_BUFFER_BIT);c.enable(c.CULL_FACE);c.cullFace(c.BACK);c=this.$11(1);var d=[],e=function(){if(g){if(h>=f.length)return"break";i=f[h++]}else{h=f.next();if(h.done)return"break";i=h.value}var c=i,e=b("Comet360PhotoTiledCubemapTile").hashCubemapTileInfo(c),j=a.$5.get(e);j==null&&(j=new(b("CometWebGLCubemapTileMesh"))(a.$1,c,a.$6,a.$8,a.$9),a.$5.set(e,j));d.push(j);e=a.$6.hasTexture(c);!e&&!a.$2.isFetchingTileImage(c)&&b("promiseDone")(a.$2.fetchTileImage(c).then(function(b){a.$6.loadTexture(c,b),a.$4(function(){a.draw()})}))};for(var f=c,g=Array.isArray(f),h=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;c=e();if(c==="break")break}for(var c=0;c<d.length;c++){e=d[c];e.draw(this.$3.getViewMatrix(),this.$3.getProjectionMatrix())}};c.$11=function(a){var b=Math.pow(2,a),c=[];for(var d=0;d<6;d++)for(var e=0;e<b;e++)for(var f=0;f<b;f++)c.push({col:f,face:d,level:a,row:e});return c};c.$10=function(){var a=this;if(this.$7)return new(b("Promise"))(function(a,b){a()});var c=[],d=function(b){var d={col:0,face:b,level:0,row:0};c.push(a.$2.fetchTileImage(d).then(function(b){a.$6.loadTexture(d,b)}))};for(var e=0;e<6;e++)d(e);return b("Promise").all(c).then(function(){a.$7=!0})};return a}();e.exports=a}),null);
__d("Comet360SphericalMediaHeadingIndicatorOverlay.react",["React","stylex"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React"),h={arcRadius:6.3,arcStroke:5.3,backgroundColor:"rgba(0, 0, 0, 0.5)",backgroundRadius:17.5,centerRadius:2,elementColor:"rgba(255, 255, 255, 0.85)",height:35,innerRadius:12,innerStroke:1,partialPanoElementColor:"rgba(255, 255, 255, 0.6)",rimRadius:16.8,rimStroke:1.4,triangle:[2,2.5,5.2],width:35};function i(){return Math.max(window.devicePixelRatio||1,1)}function j(){var a=i();return{height:h.height*a,width:h.width*a}}function k(){var a=j();return{x:a.width/2,y:a.height/2}}var l=function(a,b,c,d){a.beginPath(),a.arc(b.x,b.y,c*i(),0,2*Math.PI,!1),a.fillStyle=d,a.lineWidth=0,a.fill()},m=function(a,b,c,d,e,f,g){var h=i();a.beginPath();a.arc(b.x,b.y,c*h,d,e,!1);a.lineWidth=f*h;a.strokeStyle=g;a.stroke()};function n(a){var b=k(),c=i(),d=h.triangle[0]*c,e=h.triangle[1]*c;c=h.triangle[2]*c;a.translate(b.x,b.y);a.beginPath();a.moveTo(0,d-b.y);a.lineTo(-e,c-b.y);a.lineTo(e,c-b.y);a.fillStyle=h.elementColor;a.fill()}function o(a,b,c,d){var e=k();l(a,e,h.backgroundRadius,h.backgroundColor);l(a,e,h.centerRadius,h.elementColor);m(a,e,h.innerRadius,0,2*Math.PI,h.innerStroke,h.partialPanoElementColor);b=b/2;m(a,e,h.innerRadius,c+d-b,c+d+b,h.innerStroke,h.elementColor)}function p(a,b,c,d,e){c=c-d;d=b/2;m(a,k(),h.arcRadius,e+c-d,e+c+d,h.arcStroke,h.elementColor)}function a(a){var b=a.currentHeading,c=a.initialHeading,d=c===void 0?0:c;c=a.isVisible;c=c===void 0?!0:c;var e=a.maximumHorizontalFov,f=a.poiHeading,h=f===void 0?1.5*Math.PI:f,i=a.viewerHorizontalFov,k=g.useRef(null);g.useLayoutEffect(function(){var a=k.current;if(a==null)return;var c=j();(a.width!==c.width||a.height!==c.height)&&(a.width=c.width,a.height=c.height);a=a.getContext("2d");if(!a)return;a.save();a.clearRect(0,0,c.width,c.height);o(a,e,h,d);p(a,i,h,d,b);n(a);a.restore()},[b,d,e,h,i]);return g.jsx("div",{className:"t4m6vmga e4zzj2sf art1omkt jowmb856 py2didcb rk01pc8j pmk7jnqg hzruof5a afyhebng n7fi1qx3"+(c?"":" b5wmifdl"),children:g.jsx("canvas",{className:"k4urcfbm datstx6m",ref:k})})}}),null);
__d("LazyMat4",["Matrices"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$2=!0,this.$1=b("Matrices").createIdentityMat4(),this.$3=a}var c=a.prototype;c.value=function(){this.$2&&(this.$1=this.$3(),this.$2=!1);return[].concat(this.$1)};c.markDirty=function(){this.$2=!0};return a}();e.exports=a}),null);
__d("CometWebGLCamera",["LazyMat4","Matrices","Quaternions"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,c,d,e){var f=this;this.$1=a;this.$2=c;this.$3=d;this.$4=e;this.$6=[0,0,0,1];this.$5=[0,0,0];this.$7=new(b("LazyMat4"))(function(){var a,c=(a=b("Matrices")).createRotationMatrixFromQuaternion(f.$6),d=a.createTranslationMatrixFromVec(f.$5);c=a.multiplyMat4(c,d);return a.invertMat4(c)});this.$8=new(b("LazyMat4"))(function(){return b("Matrices").createPerspectiveProjectionMatrix(f.$1,f.$2,f.$3,f.$4)});this.$9=new(b("LazyMat4"))(function(){var a=b("Matrices").multiplyMat4(f.$7.value(),f.$8.value());return b("Matrices").invertMat4(a)})}var c=a.prototype;c.getViewMatrix=function(){return this.$7.value()};c.getProjectionMatrix=function(){return this.$8.value()};c.getInvertedViewProjectionMatrix=function(){return this.$9.value()};c.getRotation=function(){return[].concat(this.$6)};c.setRotation=function(a){this.$6=[].concat(a);this.$7.markDirty();this.$9.markDirty();return this};c.getPosition=function(){return[].concat(this.$5)};c.setPosition=function(a){this.$5=a;this.$7.markDirty();this.$9.markDirty();return this};c.getAspectRatio=function(){return this.$2};c.setAspectRatio=function(a){this.$2=a;this.$8.markDirty();this.$9.markDirty();return this};c.getHorizontalFov=function(){return a.computeHorizontalFov(this.$2,this.$1)};c.getVerticalFov=function(){return this.$1};c.setVerticalFov=function(a){this.$1=a;this.$8.markDirty();this.$9.markDirty();return this};c.translate=function(a,c,d,e){e===void 0&&(e=!0);a=[a,c,d,0];if(!e){c=b("Matrices").createRotationMatrixFromQuaternion(this.$6);a=b("Matrices").multiplyVec4(a,c)}this.$5=[this.$5[0]+a[0],this.$5[1]+a[1],this.$5[2]+a[2]];this.$7.markDirty();this.$9.markDirty();return this};c.rotate=function(a){this.$6=b("Quaternions").multiply(this.$6,a);this.$7.markDirty();this.$9.markDirty();return this};a.computeHorizontalFov=function(a,b){return 2*Math.atan(Math.tan(b/2)*a)};a.computeVerticalFov=function(a,b){return 2*Math.atan(Math.tan(b/2)/a)};return a}();e.exports=a}),null);
__d("PanEventListenerWrapper.react",["React","VideoPlayerPointerDrag"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React"),h=5;function a(a){var c=a.onPan,d=a.onPanEnd,e=a.onPanStart,f=a.onPress,i=g.useRef(0),j=g.useRef(null),k=g.useRef(null),l=g.useCallback(function(a){i.current=0,j.current=a.clientX,k.current=a.clientY,e!=null&&e()},[i,j,k,e]),m=g.useCallback(function(a){if(j.current!=null&&k.current!=null){var b=a.clientX-j.current,d=a.clientY-k.current,e=Math.sqrt(b*b+d*d);i.current+=e;c!=null&&c(b,d)}j.current=a.clientX;k.current=a.clientY},[i,j,k,c]),n=g.useCallback(function(){i.current<h&&(f!=null&&f()),d!=null&&d()},[f,d]);n=b("VideoPlayerPointerDrag").usePointerDrag({onDragCancel:n,onDragEnd:n,onDragMove:m,onDragStart:l});m=n.rootProps;return g.jsx("div",babelHelpers["extends"]({},m,{children:a.children}))}}),null);
__d("SphericalPhotoPanEventListenerWrapper.react",["PanEventListenerWrapper.react","React","useFrameTiming"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React"),h=.95,i=.001,j=1;function a(a){var c=a.children,d=a.onPan;a=a.onPress;var e=g.useRef(0),f=g.useRef(0),k=g.useRef(0),l=g.useRef(0),m=b("useFrameTiming")(),n=m[0],o=m[1],p=g.useCallback(function(){e.current*=h,f.current*=h,d(e.current,f.current),(Math.abs(e.current)>i||Math.abs(f.current)>i)&&n(p)},[e,f,d,n]);m=g.useCallback(function(a,b){o(),k.current=a,l.current=b,d(a,b)},[o,d,k,l]);var q=g.useCallback(function(){o()},[o]),r=g.useCallback(function(){var a=function(a){return Math.abs(a)>j?a:0};e.current=a(k.current||0);f.current=a(l.current||0);n(p)},[e,f,k,l,n,p]);return g.jsx(b("PanEventListenerWrapper.react"),{onPan:m,onPanEnd:r,onPanStart:q,onPress:a,children:c})}}),null);
__d("Comet360PhotoViewer.react",["fbt","Comet360PhotoSphericalRenderer","Comet360PhotoTiledCubemapRenderer","Comet360PhotoTypes","Comet360SphericalMediaHeadingIndicatorOverlay.react","CometFeedStoryImmersiveMediaMouseOverlay.react","CometWebGLCamera","Quaternions","React","SphericalPhotoPanEventListenerWrapper.react","clearTimeout","mergeRefs","promiseDone","recoverableViolation","setTimeout","useFrameTiming","useGLContext","useThrottled","useVisibilityObserver"],(function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h=b("React"),i=Math.PI/2,j=.1,k=100,l=1.527163;function a(a){var c=a.fallbackElement,d=a.height,e=a.onLoad,f=a.onPress,m=a.photoEncoding,n=a.width,o=n/d,p=h.useMemo(function(){if(m.startingView.verticalFov!=null)return m.startingView.verticalFov;return m.startingView.horizontalFov!=null?b("CometWebGLCamera").computeVerticalFov(o,m.startingView.horizontalFov):l},[m.startingView.verticalFov,m.startingView.horizontalFov,o]),q=h.useMemo(function(){var a;return(a=m.startingView.horizontalFov)!=null?a:b("CometWebGLCamera").computeHorizontalFov(o,p)},[m.startingView.horizontalFov,o,p]),r=h.useRef(2*Math.PI-m.startingView.heading),s=h.useRef(m.startingView.pitch),t=h.useRef(r.current),u=h.useState(t.current),v=u[0],w=u[1];u=h.useState(!0);var x=u[0],y=u[1];u=h.useState(!1);var z=u[0],A=u[1],B=h.useRef(null);u=b("useGLContext")(n,d,{expand:!0});var C=u[0],D=u[1],E=h.useRef([0,0]),F=h.useRef(0);u=b("useFrameTiming")();var G=u[0],H=h.useMemo(function(){return new(b("CometWebGLCamera"))(p,o,j,k)},[p,o]),I=h.useMemo(function(){if(C==null)return null;switch(m.projectionType){case b("Comet360PhotoTypes").Comet360PhotoProjection.TiledCubemap:var a=m.tiledCubemapDataProvider;if(a==null){b("recoverableViolation")("Data provider for tiled cubemap renderer was not set","immersive_media");return null}return new(b("Comet360PhotoTiledCubemapRenderer"))(C,a,H,G);case b("Comet360PhotoTypes").Comet360PhotoProjection.Cylindrical:case b("Comet360PhotoTypes").Comet360PhotoProjection.Equirectangular:a=m.sphericalDataProvider;if(a==null){b("recoverableViolation")("Data provider for spherical renderer was not set","immersive_media");return null}return new(b("Comet360PhotoSphericalRenderer"))(C,a,H)}},[C,H,m,G]),J=h.useCallback(function(){if(I==null)return;I.draw()},[I]),K=function(){b("clearTimeout")(B.current),B.current=b("setTimeout")(function(){A(!0)},3e3)};u=function(){z&&A(!1),K()};var L=b("useThrottled")(u,100),M=b("useVisibilityObserver")({onVisible:function(){K()}});u=h.useMemo(function(){return b("mergeRefs")(D,M)},[D,M]);h.useEffect(function(){return function(){b("clearTimeout")(B.current)}},[]);var N=h.useCallback(function(){if(C==null)return;var a=C.canvas,b=0,c=0;while(a!=null)b+=a instanceof HTMLElement?a.offsetLeft:0,c+=a instanceof HTMLElement?a.offsetTop:0,a=a instanceof HTMLElement?a.offsetParent:null;E.current=[b,c]},[E,C]),O=h.useMemo(function(){return[n/2/Math.tan(q/2),d/2/Math.tan(p/2)]},[d,q,p,n]),P=O[0],Q=O[1],R=h.useCallback(function(a,c){if(a===0&&c===0)return;r.current+=Math.atan(a/P);s.current+=Math.atan(c/Q);s.current>i&&(s.current=i);s.current<-i&&(s.current=-i);a=b("Quaternions").quaternionFromTaitBryan(s.current,r.current,0);w(t.current-(r.current-t.current));H.setRotation(a);G(function(){J()})},[H,J,P,Q,G]);O=h.useCallback(function(a,b){L(),R(a,b)},[R,L]);var S=h.useCallback(function(){var a;if(C==null)return;N();var b=window.innerHeight,c=C.canvas.clientHeight;b=b+c;a=E.current[1]-((a=(a=document.scrollingElement)==null?void 0:a.scrollTop)!=null?a:0)+c;c=a/b;a=c-F.current;F.current=c;if(c<0||c>1)return;R(-a*P,0)},[E,C,N,R,P]);h.useEffect(function(){document.addEventListener("scroll",S);var a=!0;if(I==null)return;b("promiseDone")(I.initialize().then(function(){if(!a)return;var c=b("Quaternions").quaternionFromTaitBryan(s.current,r.current,0);H.setRotation(c);G(function(){J()});y(!1);e&&e()}));return function(){a=!1,document.removeEventListener("scroll",S)}},[H,I,J,e,S,G]);return h.jsxs(b("SphericalPhotoPanEventListenerWrapper.react"),{onPan:O,onPress:f,children:[h.jsx("div",{ref:u,style:{display:x?"none":"block",lineHeight:0}}),x?c:null,h.jsx(b("CometFeedStoryImmersiveMediaMouseOverlay.react"),{descriptionFbt:g._("Click and drag to look around"),isActive:z,showClick:!0}),h.jsx(b("Comet360SphericalMediaHeadingIndicatorOverlay.react"),{currentHeading:v,initialHeading:t.current,isVisible:!x,maximumHorizontalFov:a.photoEncoding.horizontalFov,viewerHorizontalFov:p})]})}}),null);
__d("Comet3DPhotoLoadingOverlay.react",["React","stylex"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){a=a.isVisible;return g.jsx("div",{className:"orwu60u2 e4zzj2sf art1omkt jowmb856 py2didcb rk01pc8j kfkz5moi pmk7jnqg hzruof5a rdkrh8wx"+(a?"":" b5wmifdl"),children:g.jsx("div",{})})}}),null);
__d("Comet360PhotoTiledCubemapDataProvider",["Promise","Comet360PhotoTiledCubemapTile","CometRelay","unrecoverableViolation","Comet360PhotoTiledCubemapDataProvider_tileUriQuery.graphql"],(function(a,b,c,d,e,f){"use strict";var g,h=g!==void 0?g:g=b("Comet360PhotoTiledCubemapDataProvider_tileUriQuery.graphql");a=function(){function a(a,b,c,d,e){this.$1=a,this.$2=b,this.$5=c,this.$3=new Map(),this.$4=new Map(),this.$6=d,this.$7=e}var c=a.prototype;c.maxTileLevel=function(){return this.$5};c.horizontalFov=function(){return this.$6};c.verticalFov=function(){return this.$7};c.isFetchingTileImage=function(a){a=b("Comet360PhotoTiledCubemapTile").hashCubemapTileInfo(a);return this.$4.has(a)};c.fetchTileImage=function(a){var c=this,d=b("Comet360PhotoTiledCubemapTile").hashCubemapTileInfo(a);if(this.isFetchingTileImage(a)){var e=this.$4.get(d);if(e==null)throw b("unrecoverableViolation")("Data Provider is fetching tile image but promise is null","immersive_media");return e}if(this.$3.has(d))return new(b("Promise"))(function(a,b){a(c.$3.get(d))});e=this.$8(a).then(function(b){return c.$9(a,b).then(function(a){c.$4["delete"](d);return a})});this.$4.set(d,e);return e};c.$9=function(a,c){var d=this,e=b("Comet360PhotoTiledCubemapTile").hashCubemapTileInfo(a);return new(b("Promise"))(function(a,b){var d=new Image();d.crossOrigin="anonymous";d.onload=function(){a(d)};c==null?a(null):d.src=c}).then(function(a){d.$3.set(e,a);return a})};c.$8=function(a){return b("CometRelay").fetchQuery(this.$1,h,{id:this.$2,tileInfoList:[a]}).toPromise().then(function(a){a=a==null?void 0:(a=a.node)==null?void 0:a.tiles;return a==null||a[0]==null?null:a[0].uri})};return a}();e.exports=a}),null);
__d("CometRemote360PhotoViewer.react",["Comet360GyroOverlay.react","Comet360PhotoTiledCubemapDataProvider","Comet360PhotoTypes","Comet360PhotoViewer.react","CometRelay","React","clearTimeout","recoverableViolation","setTimeout","stylex","CometRemote360PhotoViewer_photo.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=b("React"),i=584;function j(a){return a/180*Math.PI}function a(a){var c,d,e,f,k,l,m,n,o,p=h.useState(!1),q=p[0],r=p[1];p=h.useCallback(function(){r(!0)},[r]);var s=h.useState(null),t=s[0];s=s[1];var u=h.useState(!1),v=u[0],w=u[1],x=h.useRef(null);h.useEffect(function(){x.current=b("setTimeout")(function(){w(!0)},2e3);return function(){x.current!=null&&b("clearTimeout")(x.current)}});u=!v||!q;v=b("CometRelay").useRelayEnvironment();q=b("CometRelay").useFragment(g!==void 0?g:g=b("CometRemote360PhotoViewer_photo.graphql"),a.photo);q=(q=q==null?void 0:q.photo_encodings)!=null?q:[];q=q.find(function(a){return(a==null?void 0:a.projection_type)==="tiled_cubemap"});if(q==null){b("recoverableViolation")("360 photo does not have tile_cubemap encoding","comet_feed");return a.fallback}c=(c=q.max_tile_level)!=null?c:0;d=(d=q.id)!=null?d:0;e=(e=(e=q.spherical_metadata)==null?void 0:e.initial_view_heading_degrees)!=null?e:0;f=(f=(f=q.spherical_metadata)==null?void 0:f.initial_view_pitch_degrees)!=null?f:0;k=(k=(k=q.spherical_metadata)==null?void 0:k.initial_vertical_fov_degrees)!=null?k:0;l=(l=(l=q.spherical_metadata)==null?void 0:l.initial_horizontal_fov_degrees)!=null?l:0;m=(m=(m=q.spherical_metadata)==null?void 0:m.cropped_area_image_width_pixels)!=null?m:0;n=(n=(n=q.spherical_metadata)==null?void 0:n.cropped_area_image_height_pixels)!=null?n:0;o=(o=(o=q.spherical_metadata)==null?void 0:o.full_pano_width_pixels)!=null?o:0;q=(q=(q=q.spherical_metadata)==null?void 0:q.full_pano_height_pixels)!=null?q:0;var y=m/n;m=m/o*Math.PI*2;o=n/q*Math.PI;if(t==null){s(new(b("Comet360PhotoTiledCubemapDataProvider"))(v,d.toString(),c,m,o));return a.fallback}n={aspectRatio:y,horizontalFov:m,projectionType:b("Comet360PhotoTypes").Comet360PhotoProjection.TiledCubemap,startingView:{heading:j(e),horizontalFov:l?j(l):null,pitch:j(f),verticalFov:k?j(k):null},tiledCubemapDataProvider:t,verticalFov:o};return h.jsxs("div",{className:"l9j0dhe7",children:[h.jsx(b("Comet360PhotoViewer.react"),{fallbackElement:a.fallback,height:i,onLoad:p,photoEncoding:n,width:i}),h.jsx("div",{className:"kr520xx4 j9ispegn pmk7jnqg hzruof5a n7fi1qx3 i09qtzwb",children:h.jsx(b("Comet360GyroOverlay.react"),{isVisible:u})})]})}}),null);
__d("CometRemote3DPhotoViewer.react",["Comet3DPhotoLoadingOverlay.react","CometFeedStoryViewportMaxHeightMediaLayout.react","CometRelay","React","clearTimeout","recoverableViolation","requireCond","setTimeout","stylex","cr:1298198","CometRemote3DPhotoViewer_photo.graphql"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h,i=b("React"),j=584,k={content:{height:"datstx6m",position:"l9j0dhe7"},image:{bottom:"i09qtzwb",end:"n7fi1qx3",position:"pmk7jnqg",start:"j9ispegn",top:"kr520xx4"},overlays:{bottom:"i09qtzwb",end:"n7fi1qx3",pointerEvents:"hzruof5a",position:"pmk7jnqg",start:"j9ispegn",top:"kr520xx4"},photoContainer:{position:"l9j0dhe7"},root:{borderBottom:"linmgsc8",borderTop:"opwvks06",boxShadow:"g81y0s2s"}};function a(a){var c,d,e,f=a.fallback;a=b("CometRelay").useFragment(g!==void 0?g:g=b("CometRemote3DPhotoViewer_photo.graphql"),a.photo);var l=i.useState(!1),m=l[0],n=l[1];l=i.useState(!1);var o=l[0],p=l[1],q=i.useRef(null);i.useEffect(function(){q.current=b("setTimeout")(function(){p(!0)},2e3);return function(){q.current!=null&&b("clearTimeout")(q.current)}},[]);l=i.useCallback(function(){n(!0)},[n]);o=!o||!m;a=(m=a==null?void 0:a.immersive_photo_encodings)!=null?m:[];m=a.find(function(a){return(a==null?void 0:a.projection_type)==="three_d"});if(m==null){b("recoverableViolation")("3D photo does not have three_d encoding","comet_feed");return f}a=(a=m.binary_cdn_uri)!=null?a:"";m=(m=m.id)!=null?m:"";c=(c=f.props.src)!=null?c:"";d=(d=f.props.width)!=null?d:0;e=(e=f.props.height)!=null?e:0;(d===0||e===0)&&b("recoverableViolation")("null fallback size was provided for 3d photo","comet_feed");var r=d===0||e===0?{aspectRatio:1,height:1,width:1}:{aspectRatio:d/e,height:e,width:d};r=r.aspectRatio;var s=a!=null&&b("cr:1298198")!=null?i.jsxs("div",{className:(h||(h=b("stylex")))(k.photoContainer),children:[i.jsx(b("cr:1298198"),{fallbackURI:c,fileURI:a,height:j/r,onLoad:l,photoID:m,width:j}),i.jsx("div",{className:(h||(h=b("stylex")))(k.overlays),children:i.jsx(b("Comet3DPhotoLoadingOverlay.react"),{isVisible:o})})]}):f;return i.jsx("div",{className:(h||(h=b("stylex")))(k.root),children:i.jsx(b("CometFeedStoryViewportMaxHeightMediaLayout.react"),{backgroundColor:null,mediaHeight:e,mediaWidth:d,children:function(a){return i.jsx("div",{className:(h||(h=b("stylex")))(k.content,a),children:i.jsx("div",{className:h(k.image),children:s})})}})})}}),null);
__d("CometMediaViewerRightRailUFIGlimmer.react",["BaseGlimmer.react","React","stylex"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(){return g.jsxs("div",{className:"dati1w0a ihqw7lf3 hv4rvrfc discj3wi kwzhilbh j83agx80",children:[g.jsx(b("BaseGlimmer.react"),{className:"a12rg87m bsodd3zb mwvzfrdb kxcb68kb kgjeooe1 dwerhba3",index:1}),g.jsx(b("BaseGlimmer.react"),{className:"a12rg87m bsodd3zb mwvzfrdb kxcb68kb kgjeooe1 dwerhba3",index:2}),g.jsx(b("BaseGlimmer.react"),{className:"a12rg87m bsodd3zb mwvzfrdb kxcb68kb kgjeooe1 dwerhba3",index:3})]})}}),null);
__d("CometPhotoViewerResponsiveInnerWrapper.react",["CometRouteRenderType","React","stylex"],(function(a,b,c,d,e,f){"use strict";f.useCometPhotoViewerContainerStyles=j;var g,h=b("React"),i={backgroundContainerDialog:{"@media (max-width: 899px)":{height:"nos9j3a5"}},backgroundContainerDialogWithFooter:{height:"n626y76b","@media (max-width: 899px)":{height:"aessy0lw"}},backgroundContainerResponsive:{alignItems:"bp9cbjyn",display:"j83agx80",position:"l9j0dhe7","@media (max-width: 899px)":{height:"spskuzq3"}},backgroundContainerTabs:{height:"bkyfam09","@media (max-width: 899px)":{height:"pw8zj2ei"}},backgroundContainerTabsWithFooter:{height:"bekozo2m","@media (max-width: 899px)":{height:"f6tgzqhp"}},image:{maxWidth:"d2edcug0","@media (max-width: 899px)":{maxHeight:"r9f5tntg"}},maxImageHeightDialog:{maxHeight:"ji94ytn4","@media (max-width: 899px)":{maxHeight:"bnxxjg7g"}},maxImageHeightDialogWithFooter:{maxHeight:"nskh8ow2","@media (max-width: 899px)":{maxHeight:"dx5evmzu"}},maxImageHeightTabs:{maxHeight:"gitj76qy","@media (max-width: 899px)":{maxHeight:"bnxxjg7g"}},maxImageHeightTabsWithFooter:{maxHeight:"kgqd366c","@media (max-width: 899px)":{maxHeight:"a7lra598"}},passthroughImage:{backgroundPosition:"d2hbt3d9",backgroundRepeat:"qb00l2mb",backgroundSize:"gj6al65z",height:"datstx6m",width:"k4urcfbm"},photoWrapperPlaceholder:{height:"datstx6m",width:"k4urcfbm"},photoWrapperResponsive:{alignItems:"bp9cbjyn",display:"j83agx80",flexDirection:"cbu4d94t",justifyContent:"taijpn5t",position:"l9j0dhe7"},placeholderContainer:{height:"datstx6m",width:"k4urcfbm"}};function j(a,c){a===void 0&&(a=!1);c===void 0&&(c=!1);var d=b("CometRouteRenderType").useIsPushView();return(g||(g=b("stylex")))(i.backgroundContainerResponsive,!a&&d&&i.backgroundContainerDialog,!a&&!d&&i.backgroundContainerTabs,a&&d&&i.backgroundContainerDialogWithFooter,a&&!d&&i.backgroundContainerTabsWithFooter,c&&i.placeholderContainer)}function k(a,c){var d=b("CometRouteRenderType").useIsPushView();return(g||(g=b("stylex")))(!a&&d?i.maxImageHeightDialog:null,!a&&!d?i.maxImageHeightTabs:null,a&&d?i.maxImageHeightDialogWithFooter:null,a&&!d?i.maxImageHeightTabsWithFooter:null,c?i.passthroughImage:null,c?null:i.image)}function l(a,c){var d=b("CometRouteRenderType").useIsPushView();return[!a&&d&&i.maxImageHeightDialog,!a&&!d&&i.maxImageHeightTabs,a&&d&&i.maxImageHeightDialogWithFooter,a&&!d&&i.maxImageHeightTabsWithFooter,c&&i.passthroughImage,!c&&i.image]}function a(a,c){var d=a.height,e=a.imageUri,f=a.showPlaceholderImage;f=f===void 0?!0:f;var l=a.width;a=a.withFooter;a=a===void 0?!1:a;a=k(a,!0);var m=j(!1,!0);return h.jsx("div",{className:m,ref:(m=c)!=null?m:null,children:e!=null&&f&&h.jsx("div",{className:(g||(g=b("stylex")))(i.photoWrapperResponsive,i.photoWrapperPlaceholder),children:h.jsx("div",{className:a,style:d!=null&&l!=null?{backgroundImage:"url("+e+")",maxHeight:d,maxWidth:l}:{backgroundImage:"url("+e+")"}},e)})})}function c(a,c){var d=a.imageComponent,e=a.imageComponentWithXStyle;a=a.withFooter;a=a===void 0?!1:a;var f=k(a,!1);a=l(a,!1);return h.jsx("div",{className:(g||(g=b("stylex")))(i.photoWrapperResponsive),ref:c,children:d!=null?d(f):e!=null?e(a):null})}d=h.forwardRef(c);f.CometPhotoViewerImageWrapper=d;e=h.forwardRef(a);f.CometPhotoViewerPlaceholderWrapper=e}),null);
__d("NumAiSuggestionsBubbleImpressionFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1746400");c=b("FalcoLoggerInternal").create("num_ai_suggestions_bubble_impression",a);e.exports=c}),null);
__d("ProductTagPhotoViewerDoneClickFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1744225");c=b("FalcoLoggerInternal").create("product_tag_photo_viewer_done_click",a);e.exports=c}),null);
__d("ProductTagPhotoViewerIconClickFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f){"use strict";a=b("getFalcoLogPolicy_DO_NOT_USE")("1744226");c=b("FalcoLoggerInternal").create("product_tag_photo_viewer_icon_click",a);e.exports=c}),null);
__d("CometPhotoViewer.react",["ix","fbt","Actor","CometAIProductTagSuggestionsUtil.react","CometFeedAttachmentOverlayContext","CometFullScreen","CometHero.react","CometImage.react","CometMediaViewerStage.react","CometPagelet.react","CometPhotoTaggingConstants","CometPhotoViewerImageSuspense","CometPhotoViewerResponsiveInnerWrapper.react","CometPhotoViewerViewStateContext","CometPhotoViewerViewStateDispatcherContext","CometPlaceholder.react","CometProductTagLoggingUtils","CometRelay","CometRouteParams","CometRouteRenderType","CometRow.react","CometRowItem.react","CometTheme.react","CometTooltip.react","CometTrackingNodeProvider.react","CometVisualCompletionAttributes","React","TetraButton.react","TetraIcon.react","TetraText.react","WebSession","fbicon","gkx","qex","recoverableViolation","requireCond","requireDeferred","stylex","useCometCallout","useCurrentRoute","useMediaViewerVPVDLogger","useMergeRefs","useStoryViewabilityLogger","cr:1707937","cr:1707930","cr:1685690","cr:1685691","CometPhotoViewer_photo.graphql","NumAiSuggestionsBubbleImpressionFalcoEvent","ProductTagPhotoViewerDoneClickFalcoEvent","ProductTagPhotoViewerIconClickFalcoEvent"],(function(a,b,c,d,e,f,g,h){"use strict";e.exports=a;var i,j,k=b("React"),l=b("requireDeferred")("CometMediaTagFalcoEvent"),m={aiProductTagBadge:{display:"j83agx80",end:"n7fi1qx3",position:"pmk7jnqg",top:"kr520xx4",zIndex:"tkr6xdv7"},container:{display:"j83agx80",flexDirection:"cbu4d94t",flexGrow:"buofh1pr",position:"l9j0dhe7"},iconButtons:{end:"n7fi1qx3",overflowX:"ni8dbmo4",overflowY:"stjgntxs",position:"pmk7jnqg",top:"kr520xx4",zIndex:"tkr6xdv7"},noPointerEvents:{pointerEvents:"hzruof5a"},peopleTagInstructionText:{paddingBottom:"ihqw7lf3"},productTagCallout:{maxWidth:"gtvx26ai"},productTagInstructions:{alignItems:"bp9cbjyn",display:"j83agx80",flexDirection:"btwxx1t3"},tagDoneDiv:{pointerEvents:"oqq733wu"},tagInstruction:{position:"pmk7jnqg",start:"kfkz5moi",transform:"cj5g2342"},tagInstructionRow:{alignItems:"aovydwv3",backgroundImage:"kpb67iw4",bottom:"i09qtzwb",display:"j83agx80",height:"fdipuqhw",justifyContent:"taijpn5t",paddingBottom:"jfpizvyy",pointerEvents:"hzruof5a",position:"pmk7jnqg",width:"k4urcfbm"},tagInstructionText:{alignItems:"bp9cbjyn",display:"j83agx80",paddingEnd:"rv4hoivh"},tagLayer:{bottom:"i09qtzwb",end:"n7fi1qx3",position:"pmk7jnqg",start:"j9ispegn",top:"kr520xx4"}};function n(a){return(a||[]).some(function(a){a=a.projection_type;return a==="tiled_cubemap"})}function o(a){return(a||[]).some(function(a){a=a.projection_type;return a==="three_d"})}var p=i!==void 0?i:i=b("CometPhotoViewer_photo.graphql");function a(a){var c,d,e,f,i,q,r,s,t=k.useContext(b("CometPhotoViewerViewStateDispatcherContext")),u=k.useContext(b("CometPhotoViewerViewStateContext")),v=b("Actor").useActor(),w=v[0];v[1];v=a.origHeight;var x=a.origSrc,y=a.origWidth,z=a.photo,A=a.photoTagLayerQueryReference,B=a.showTag,C=a.storyRenderLocation,D=babelHelpers.objectWithoutPropertiesLoose(a,["origHeight","origSrc","origWidth","photo","photoTagLayerQueryReference","showTag","storyRenderLocation"]),E=b("CometRelay").useFragment(p,z);z=k.useCallback(function(){t({tagModeEnabled:!1,type:"SET_TAG_MODE_ENABLED"}),t({isProductTagging:!1,type:"SET_IS_PRODUCT_TAGGING"})},[t]);var F=E==null?void 0:(c=E.image)==null?void 0:c.uri,G=E==null?void 0:E.id,H=E==null?void 0:(c=E.owner)==null?void 0:c.id;c=(c=E==null?void 0:(c=E.tags)==null?void 0:c.edges)!=null?c:[];var I=k.useRef(new Set(c.map(function(a){return a==null?void 0:(a=a.node)==null?void 0:a.name}))),J=E==null?void 0:E.created_time,K=E==null?void 0:(c=E.container_story)==null?void 0:c.post_id;c=E==null?void 0:(c=E.container_story)==null?void 0:c.id;var L=(E==null?void 0:E.can_viewer_add_tags)===!0;d=E==null?void 0:(d=E.cix_screen)==null?void 0:d.view_model;var M=k.useMemo(function(){return{authorId:H,createdTime:J,fbid:G,source:6,storyContainerId:K}},[H,J,G,K]);M=b("useMediaViewerVPVDLogger")(M);var N=M[0],O=M[1];M=E==null?void 0:(M=E.container_story)==null?void 0:M.encrypted_tracking;e=E==null?void 0:(e=E.container_story)==null?void 0:e.viewability_config;f=(f=E==null?void 0:E.container_story)!=null?f:{};f=f.client_view_config;f={can_delay_log_impression:f==null?void 0:f.can_delay_log_impression,use_banzai_signal_imp:f==null?void 0:f.use_banzai_signal_imp,use_banzai_vital_imp:f==null?void 0:f.use_banzai_vital_imp};f=b("useStoryViewabilityLogger")({clientViewConfig:f,disabledViewabilityEventTypes:[5],encryptedTracking:M,position:0,viewabilityConfig:e});M=f.ref;e=k.useState(b("CometFullScreen").isFullScreen());var P=e[0],Q=e[1];f=b("useMergeRefs")(N,M);e=b("CometPhotoViewerResponsiveInnerWrapper.react").useCometPhotoViewerContainerStyles();var R=b("CometFeedAttachmentOverlayContext").useIsOverlayShown();N=k.useCallback(function(){if(!P){var a=document.documentElement;a!=null&&(b("CometFullScreen").requestFullScreen(a),Q(!0))}else b("CometFullScreen").exitFullScreen(),Q(!1)},[P]);M=b("CometAIProductTagSuggestionsUtil.react").getUntaggedKnownTags(E,u.knownAITags);var S=b("CometAIProductTagSuggestionsUtil.react").getUntaggedUnknownTags(E,u.unknownAITags),T=M.length+S.length,U=k.useRef(function(){b("NumAiSuggestionsBubbleImpressionFalcoEvent").log(function(){var a;return{creator_id:E==null?void 0:(a=E.owner)==null?void 0:a.page_id,media_id:G,media_type:"photo",platform:"comet",referral_source:"post_viewer"}})});k.useEffect(function(){T>0&&(U.current&&U.current())},[T]);M=function(){var a;t({tagModeEnabled:!1,type:"SET_TAG_MODE_ENABLED"});t({isProductTagging:!1,type:"SET_IS_PRODUCT_TAGGING"});if(G==null){b("recoverableViolation")("photo id can not be null","comet_feed");return}a=(a=E==null?void 0:(a=E.tags)==null?void 0:a.edges)!=null?a:[];a=a.map(function(a){return a==null?void 0:(a=a.node)==null?void 0:a.name});var c=b("WebSession").getId(),d=I.current.size?a.filter(function(a){return!I.current.has(a)}):a;V?b("ProductTagPhotoViewerDoneClickFalcoEvent").log(function(){return{container_post_id:K,creator_id:w,media_id:G,media_type:"photo",platform:"comet",referral_source:"post_viewer"}}):l.onReady(function(a){a.log(function(){return{media_fbid:G,num_users_tagged:d.length,session_id:c}})});I.current=new Set(a)};S=Boolean(E==null?void 0:(S=E.tags)==null?void 0:S.edges.some(function(a){return!(a==null?void 0:(a=a.tag)==null?void 0:a.is_product_tag)}));i=((E==null?void 0:(i=E.photo_product_tags)==null?void 0:i.length)||0)>0;q=Boolean(E==null?void 0:(q=E.owner)==null?void 0:q.page_shop_has_taggable_products)&&Boolean(E==null?void 0:(q=E.owner)==null?void 0:q.is_viewer_admin);r=E==null?void 0:(r=E.owner)==null?void 0:r.additional_profile_has_taggable_products;r=r!==null&&r!==void 0&&b("gkx")("1733965")?Boolean(r)&&w===(E==null?void 0:(r=E.owner)==null?void 0:r.user_id):q&&Boolean((E==null?void 0:(r=E.owner)==null?void 0:r.page_id)!=null)&&w===(E==null?void 0:(r=E.owner)==null?void 0:r.page_id);i=S||!i&&!S&&!q;var V=r&&!S;q=h._("You can tag products from your catalog to make it easier for people to shop from your posts.");r={align:"end",arrowStyle:"edge",label:q,position:"below",type:"accent",xstyle:m.productTagCallout};S=b("CometRouteParams").useRouteParams();q=b("useCurrentRoute")();q=(q=q==null?void 0:q.transparent)!=null?q:!1;var W=S.aymt_channel!==null&&S.aymt_channel!==void 0,aa=W?b("CometProductTagLoggingUtils").getAYMTChannelName(S.aymt_channel):null;S=k.useState(V&&W);W=S[0];var ba=S[1];S=b("useCometCallout")(r,W);r=b("CometRouteRenderType").useIsPushView();W=b("CometFeedAttachmentOverlayContext").useParentRenderInstructions();var X=k.useMemo(function(){var a,c;a=E==null?void 0:(a=E.image)==null?void 0:a.width;c=E==null?void 0:(c=E.image)==null?void 0:c.height;if(E==null||F==null||a==null||c==null)return null;c=k.jsx(b("CometImage.react"),{height:c,src:F,width:a},F);if(b("cr:1685690")!=null&&b("gkx")("1680758")&&n(E==null?void 0:E.immersive_photo_encodings))return k.jsx(b("cr:1685690"),{fallback:c,photo:E});else if(b("cr:1685691")!=null&&b("gkx")("1680759")&&o(E==null?void 0:E.immersive_photo_encodings))return k.jsx(b("cr:1685691"),{fallback:c,photo:E})},[F,E]);if(F==null){b("recoverableViolation")("Error loading media. More investigation is needed, might be an invalid photo, a special type of MediaSet, or something else.","comet_ui");return h._("No valid photo to display.")}s=!q||!r?(s=x)!=null?s:F:null;s=s!=null&&s!==""?{backgroundSrc:s}:null;var Y=P?h._("Exit Fullscreen"):h._("Enter Fullscreen"),Z=W==="CLIP_TO_MEDIA",$=d!=null?k.jsx(b("CometRelay").MatchContainer,{match:d,props:{alwaysShowDetails:!0,contentID:G,data:d,isFullScreenMediaPlayerStyle:!0,mediaUri:F,storyID:c,surface:"photo_viewer"}}):null;W=k.jsx(b("CometPagelet.react").Placeholder,{className:e,fallback:x!=null?k.jsx(b("CometPhotoViewerResponsiveInnerWrapper.react").CometPhotoViewerPlaceholderWrapper,{height:v,imageUri:x,ref:f,showPlaceholderImage:x!=null&&y!=null&&v!=null&&!R,width:y}):k.jsx("div",{className:e,ref:f,children:k.jsx(b("CometPhotoViewerResponsiveInnerWrapper.react").CometPhotoViewerImageWrapper,{imageComponentWithXStyle:function(a){return k.jsxs(k.Fragment,{children:[O,!R&&k.jsx(b("CometImage.react"),{src:F,testid:void 0,xstyle:a},F)]})}})}),name:"MediaViewerPhoto",pageletType:"media",ref:f,children:X!=null?X:k.jsx(b("CometPhotoViewerResponsiveInnerWrapper.react").CometPhotoViewerImageWrapper,{imageComponent:function(a){return k.jsxs(k.Fragment,{children:[O,k.jsx(b("CometHero.react"),{description:"MainPhoto"}),k.jsx(b("CometPhotoViewerImageSuspense"),{className:a,"data-testid":void 0,src:F},F),Z&&$,B!==null&&A!=null?k.jsx(b("CometPlaceholder.react"),{fallback:null,children:k.jsx("div",babelHelpers["extends"]({},b("CometVisualCompletionAttributes").IGNORE,{className:(j||(j=b("stylex")))(m.tagLayer,u.tagModeEnabled?null:m.noPointerEvents),children:k.jsx(B,{isTaggingProducts:u.isProductTagging,photoTagLayerQueryReference:A,tagBoxSize:b("CometPhotoTaggingConstants").TAGGING_BOX_SIZE,tagModeEnabled:u.tagModeEnabled})}))}):null]})}})},F);d=u.isProductTagging?(j||(j=b("stylex")))(m.productTagInstructions):(j||(j=b("stylex")))(m.tagInstruction);c=u.isProductTagging?h._("Click on the photo to start product tagging"):h._("Click on the photo to start tagging");x=B!==null&&A!=null&&L===!0&&!X;v=null;V?v=k.jsxs(b("CometRowItem.react"),{children:[b("cr:1707930")&&k.jsx(b("cr:1707930"),{photoID:G}),k.jsxs(b("CometTooltip.react"),{position:"below",tooltip:T>0&&b("qex")._("1707804")?h._("See suggested product tags"):h._("Tag Product"),children:[T!==0&&k.jsx("div",{className:(j||(j=b("stylex")))(m.aiProductTagBadge),children:b("cr:1707937")!=null&&k.jsx(b("cr:1707937"),{color:"blue",value:T})}),k.jsx(b("TetraIcon.react"),{"aria-label":h._("Tag product"),color:"white",hideHoverOverlay:!0,icon:b("fbicon")._(g("1649781"),32),onPress:function(){b("ProductTagPhotoViewerIconClickFalcoEvent").log(function(){return{container_post_id:K,creator_id:H,media_id:G,media_type:"photo",platform:"comet",referral_code:aa,referral_source:"post_viewer"}}),t({tagModeEnabled:!0,type:"SET_TAG_MODE_ENABLED"}),t({isProductTagging:!0,type:"SET_IS_PRODUCT_TAGGING"}),ba(!1)},ref:S})]})]}):i&&(v=k.jsx(b("CometRowItem.react"),{children:k.jsx(b("CometTrackingNodeProvider.react"),{trackingNode:140,children:k.jsx(b("CometTooltip.react"),{position:"below",tooltip:h._("Tag Photo"),children:k.jsx(b("TetraIcon.react"),{"aria-label":b("gkx")("1224637")?h._("tag coworkers"):h._("tag friends"),color:"white",hideHoverOverlay:!0,icon:b("fbicon")._(g("674580"),32),onPress:function(){t({tagModeEnabled:!0,type:"SET_TAG_MODE_ENABLED"})},testid:void 0})})})}));return k.jsxs("div",{className:(j||(j=b("stylex")))(m.container),"data-testid":void 0,children:[k.jsx(b("CometMediaViewerStage.react"),babelHelpers["extends"]({},s,{backgroundColor:q&&r?"dark":"default",initialTracePolicy:a.initialTracePolicy,onNavigatePhoto:z,storyRenderLocation:C,subOrigin:a.subOrigin},D,{children:W})),R?null:k.jsx("div",{className:(j||(j=b("stylex")))(m.iconButtons),children:k.jsxs(b("CometRow.react"),{align:"end",children:[x&&!u.tagModeEnabled&&!u.isProductTagging?v:null,k.jsx(b("CometRowItem.react"),{children:k.jsx(b("CometTooltip.react"),{position:"below",tooltip:Y,children:k.jsx(b("TetraIcon.react"),{"aria-label":Y,color:"white",hideHoverOverlay:!0,icon:P?b("fbicon")._(g("1250223"),32):b("fbicon")._(g("1250245"),32),onPress:N,size:32})})})]})}),x&&u.tagModeEnabled?k.jsx(b("CometTheme.react"),{className:(j||(j=b("stylex")))(m.tagInstructionRow),element:"div",theme:"dark",children:k.jsxs("div",{className:d,children:[k.jsx("div",{className:(j||(j=b("stylex")))(m.tagInstructionText),children:k.jsx("div",{className:Boolean(E==null?void 0:(y=E.owner)==null?void 0:y.page_shop_has_taggable_products)!==!0?(j||(j=b("stylex")))(m.peopleTagInstructionText):null,children:k.jsx(b("TetraText.react"),{color:"primary",numberOfLines:1,type:"headline4",children:c})})}),k.jsx("div",{className:(j||(j=b("stylex")))(m.tagDoneDiv),children:k.jsx(b("TetraButton.react"),{label:h._("Done Tagging"),onPress:M,type:"primary"})})]})}):null,!Z&&$]})}}),null);